(function(){"use strict";window.PxMapBehavior=window.PxMapBehavior||{};window.PxMap=window.PxMap||{};PxMapBehavior.MarkerImpl={properties:{lat:{type:Number,notify:!0,observer:"shouldUpdateInst"},lng:{type:Number,notify:!0,observer:"shouldUpdateInst"},name:{type:String,notify:!0,observer:"shouldUpdateInst"}},canAddInst:function canAddInst(){return this.latLngIsValid(this.lat,this.lng,!0)},_canBeNum:function _canBeNum(val){return!isNaN(val)&&""!==val},latLngIsValid:function latLngIsValid(lat,lng,hideError){var isValid="undefined"!==typeof lat&&this._canBeNum(lat)&&"undefined"!==typeof lng&&this._canBeNum(lng);if(isValid)return!0;if(!hideError){console.log("PX-MAP CONFIGURATION ERROR:\n        You entered an invalid `lat` or `lng` attribute for ".concat(this.is,". You must pass a valid number."))}return!1},addInst:function addInst(parent){var addedFn=this._handleMarkerAdded.bind(this),removedFn=this._handleMarkerRemoved.bind(this),tapFn=this._handleMarkerTapped.bind(this),mouseOverFn=this._handleMarkerMouseOver.bind(this),mouseOutFn=this._handleMarkerMouseOut.bind(this);this.bindEvents({add:addedFn,remove:removedFn,click:tapFn,mouseover:mouseOverFn,mouseout:mouseOutFn},this.marker);PxMapBehavior.LayerImpl.addInst.call(this,parent)},removeInst:function removeInst(parent){this._handleMarkerRemoved();PxMapBehavior.LayerImpl.removeInst.call(this,parent)},createInst:function createInst(options){this.marker=L.marker(options.geometry,options.config);this.marker.isMarker=!0;return this.marker},updateInst:function updateInst(lastOptions,nextOptions){var geomWasDefined="object"===babelHelpers.typeof(lastOptions.geometry),geomIsDefined="object"===babelHelpers.typeof(nextOptions.geometry),geomIsDifferent=geomWasDefined&&geomIsDefined&&(lastOptions.geometry.lat!==nextOptions.geometry.lat||lastOptions.geometry.lng!==nextOptions.geometry.lng);if(geomWasDefined&&!geomIsDefined){this.elementInst.setOpacity(0)}if(!geomWasDefined&&geomIsDefined){this.elementInst.setLatLng(nextOptions.geometry);this.elementInst.setOpacity(1)}if(geomIsDifferent){this.elementInst.setLatLng(nextOptions.geometry)}if(lastOptions.config.icon!==nextOptions.config.icon){this.elementInst.setIcon(nextOptions.config.icon)}},getInstOptions:function getInstOptions(){var geometry=this.getLatLng(),config={};config.title=this.name||"";config.icon=this.getMarkerIcon();return{geometry:geometry,config:config}},getLatLng:function getLatLng(){if(this.latLngIsValid(this.lat,this.lng)){return L.latLng(this.lat,this.lng)}},getMarkerIcon:function getMarkerIcon(){throw new Error("The `getMarkerIcon` method must be implemented.")},_handleMarkerAdded:function _handleMarkerAdded(){var latLng=this.getLatLng(),detail={};if(latLng){detail.latLng=latLng;detail.lat=latLng.lat;detail.lng=latLng.lng}this.fire("px-map-marker-added",detail)},_handleMarkerRemoved:function _handleMarkerRemoved(){var latLng=this.getLatLng(),detail={};if(latLng){detail.latLng=latLng;detail.lat=latLng.lat;detail.lng=latLng.lng}this.fire("px-map-marker-removed",detail)},_handleMarkerTapped:function _handleMarkerTapped(){var latLng=this.getLatLng(),detail={};if(latLng){detail.latLng=latLng;detail.lat=latLng.lat;detail.lng=latLng.lng}this.fire("px-map-marker-tapped",detail)},_handleMarkerMouseOver:function _handleMarkerMouseOver(){var latLng=this.getLatLng(),detail={};if(latLng){detail.latLng=latLng;detail.lat=latLng.lat;detail.lng=latLng.lng}this.fire("px-map-marker-mouse-over",detail)},_handleMarkerMouseOut:function _handleMarkerMouseOut(){var latLng=this.getLatLng(),detail={};if(latLng){detail.latLng=latLng;detail.lat=latLng.lat;detail.lng=latLng.lng}this.fire("px-map-marker-mouse-out",detail)}};PxMapBehavior.Marker=[PxMapBehavior.Layer,PxMapBehavior.ParentLayer,PxMapBehavior.MarkerImpl];PxMapBehavior.SymbolMarkerImpl={properties:{type:{type:String,reflectToAttribute:!0,value:"info",observer:"_updateMarkerIcon"},icon:{type:String,observer:"_updateMarkerIcon"}},getMarkerIcon:function getMarkerIcon(){if(!this.markerIcon){var options=this._getMarkerIconOptions();this.markerIcon=new PxMap.SymbolIcon(options)}return this.markerIcon},_updateMarkerIcon:function _updateMarkerIcon(){if(!this.markerIcon)return;var options=this._getMarkerIconOptions();this.markerIcon=new PxMap.SymbolIcon(options);this.shouldUpdateInst()},_getMarkerIconOptions:function _getMarkerIconOptions(){var options={type:this.type,symbol:this.symbolClass,icon:this.icon,styleScope:this.isShadyScoped()?this.getShadyScope():void 0,stroke:this.getComputedStyleValue("--iron-icon-stroke-color"),strokeWidth:this.getComputedStyleValue("--iron-icon-stroke-width"),fill:this.getComputedStyleValue("--iron-icon-fill-color")};if("custom-"===this.type.slice(0,7)){options.color=this.getComputedStyleValue("--px-map-color-".concat(this.type))}return options}};PxMapBehavior.SymbolMarker=[PxMapBehavior.Marker,PxMapBehavior.SymbolMarkerImpl];PxMapBehavior.StaticMarkerImpl={properties:{type:{type:String,reflectToAttribute:!0,value:"info",observer:"_updateMarkerIcon"}},getMarkerIcon:function getMarkerIcon(){if(!this.markerIcon){var options=this._getMarkerIconOptions();this.markerIcon=new PxMap.StaticIcon(options)}return this.markerIcon},_updateMarkerIcon:function _updateMarkerIcon(){if(!this.markerIcon)return;var options=this._getMarkerIconOptions();this.markerIcon=new PxMap.StaticIcon(options);this.shouldUpdateInst()},_getMarkerIconOptions:function _getMarkerIconOptions(){var options={type:this.type||"",styleScope:this.isShadyScoped()?this.getShadyScope():void 0};if("custom-"===this.type.slice(0,7)){options.color=this.getComputedStyleValue("--px-map-color-".concat(this.type))}return options}};PxMapBehavior.StaticMarker=[PxMapBehavior.Marker,PxMapBehavior.StaticMarkerImpl];PxMapBehavior.LocateMarkerImpl={properties:{accuracy:{type:Number,observer:"shouldUpdateInst"}},createInst:function createInst(options){this.markerBaseIcon=new CircleMarkerWithTitle(options.geometry,options.baseConfig);this.markerAccuracyIcon=L.circle(options.geometry,options.accuracyRadius,options.accuracyConfig);this.markerGroup=L.featureGroup([this.markerAccuracyIcon,this.markerBaseIcon]);this.markerGroup.isMarker=!0;this.markerGroup.getLatLng=this.getLatLng.bind(this);return this.markerGroup},updateInst:function updateInst(lastOptions,nextOptions){var geomWasDefined="object"===babelHelpers.typeof(lastOptions.geometry),geomIsDefined="object"===babelHelpers.typeof(nextOptions.geometry),geomIsDifferent=geomWasDefined&&geomIsDefined&&(lastOptions.geometry.lat!==nextOptions.geometry.lat||lastOptions.geometry.lng!==nextOptions.geometry.lng);if(geomWasDefined&&!geomIsDefined){this.markerBaseIcon.setStyle({opacity:0,fillOpacity:0});this.markerAccuracyIcon.setStyle({opacity:0,fillOpacity:0})}if(!geomWasDefined&&geomIsDefined){this.markerBaseIcon.setLatLng(nextOptions.geometry);this.markerAccuracyIcon.setLatLng(nextOptions.geometry);this.markerBaseIcon.setStyle(nextOptions.baseConfig);this.markerAccuracyIcon.setStyle(nextOptions.accuracyConfig)}if(geomIsDifferent){this.markerBaseIcon.setLatLng(nextOptions.geometry);this.markerAccuracyIcon.setLatLng(nextOptions.geometry)}if(lastOptions.accuracyRadius!==nextOptions.accuracyRadius){this.markerAccuracyIcon.setRadius(nextOptions.accuracyRadius)}if(lastOptions.baseConfig.title!==nextOptions.baseConfig.title){this.markerBaseIcon.setTitle(nextOptions.baseConfig.title)}},getInstOptions:function getInstOptions(){var geometry=this.getLatLng(),baseConfig={};baseConfig.radius=7.5;baseConfig.stroke=!0;baseConfig.color=this.getComputedStyleValue("--internal-px-map-marker-locate-icon-border-color");baseConfig.weight=3;baseConfig.opacity=1;baseConfig.fill=!0;baseConfig.fillColor=this.getComputedStyleValue("--internal-px-map-marker-locate-icon-color");baseConfig.fillOpacity=1;baseConfig.className="map-marker-locate-base ".concat(this.isShadyScoped()?this.getShadyScope():"");baseConfig.title=this.name||"";var accuracyRadius=this.accuracy||0,accuracyConfig={};accuracyConfig.stroke=!1;accuracyConfig.opacity=0;accuracyConfig.fill=!0;accuracyConfig.fillColor=this.getComputedStyleValue("--internal-px-map-marker-locate-icon-accuracy-color");accuracyConfig.fillOpacity=this.getComputedStyleValue("--internal-px-map-marker-locate-icon-accuracy-opacity");accuracyConfig.className="map-marker-locate-accuracy ".concat(this.isShadyScoped()?this.getShadyScope():"");return{geometry:geometry,baseConfig:baseConfig,accuracyRadius:accuracyRadius,accuracyConfig:accuracyConfig}}};PxMapBehavior.LocateMarker=[PxMapBehavior.Marker,PxMapBehavior.LocateMarkerImpl];var CircleMarkerWithTitle=L.CircleMarker.extend({options:{title:""},setTitle:function setTitle(title){this.options.title=title||"";if(this._path&&""===this.options.title){this._path.innerHTML=""}if(this._path&&""!==this.options.title){this._path.innerHTML="<title>".concat(this.options.title,"</title>")}},onAdd:function onAdd(){L.CircleMarker.prototype.onAdd.call(this);if(""!==this.options.title){this._path.innerHTML="<title>".concat(this.options.title,"</title>")}}});PxMap.CircleMarkerWithTitle=CircleMarkerWithTitle})();