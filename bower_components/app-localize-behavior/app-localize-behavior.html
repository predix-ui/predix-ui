<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
--><html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<script src="../intl-messageformat/dist/intl-messageformat.min.js"></script>

<script>(function(){var assign=Object.assign?Object.assign.bind(Object):function(destination,source){for(var prop in source){if(source.hasOwnProperty(prop)){destination[prop]=source[prop]}}return destination};Polymer.AppLocalizeBehavior={__localizationCache:{requests:{},messages:{},ajax:null},properties:{language:{type:String},resources:{type:Object},formats:{type:Object,value:function value(){return{}}},useKeyIfMissing:{type:Boolean,value:!1},localize:{type:Function,computed:"__computeLocalize(language, resources, formats)"},bubbleEvent:{type:Boolean,value:!1}},loadResources:function loadResources(path,language,merge){var proto=this.constructor.prototype;this.__checkLocalizationCache(proto);var ajax=proto.__localizationCache.ajax;if(!ajax){ajax=proto.__localizationCache.ajax=document.createElement("iron-ajax")}var request=proto.__localizationCache.requests[path];function onRequestResponse(event){this.__onRequestResponse(event,language,merge)}if(!request){ajax.url=path;var request=ajax.generateRequest();request.completes.then(onRequestResponse.bind(this),this.__onRequestError.bind(this));proto.__localizationCache.requests[path]=request}else{request.completes.then(onRequestResponse.bind(this),this.__onRequestError.bind(this))}},__computeLocalize:function __computeLocalize(language,resources,formats){var proto=this.constructor.prototype;this.__checkLocalizationCache(proto);if(!proto.__localizationCache){proto.__localizationCache={requests:{},messages:{},ajax:null}}proto.__localizationCache.messages={};return function(){var key=arguments[0];if(!key||!resources||!language||!resources[language])return;var translatedValue=resources[language][key];if(!translatedValue){return this.useKeyIfMissing?key:""}var messageKey=key+translatedValue,translatedMessage=proto.__localizationCache.messages[messageKey];if(!translatedMessage){translatedMessage=new IntlMessageFormat(translatedValue,language,formats);proto.__localizationCache.messages[messageKey]=translatedMessage}for(var args={},i=1;i<arguments.length;i+=2){args[arguments[i]]=arguments[i+1]}return translatedMessage.format(args)}.bind(this)},__onRequestResponse:function __onRequestResponse(event,language,merge){var propertyUpdates={},newResources=event.response;if(merge){if(language){propertyUpdates.resources=assign({},this.resources||{});propertyUpdates["resources."+language]=assign(propertyUpdates.resources[language]||{},newResources)}else{propertyUpdates.resources=assign(this.resources,newResources)}}else{if(language){propertyUpdates.resources={};propertyUpdates.resources[language]=newResources;propertyUpdates["resources."+language]=newResources}else{propertyUpdates.resources=newResources}}if(this.setProperties){this.setProperties(propertyUpdates)}else{for(var key in propertyUpdates){this.set(key,propertyUpdates[key])}}this.fire("app-localize-resources-loaded",event,{bubbles:this.bubbleEvent})},__onRequestError:function __onRequestError(event){this.fire("app-localize-resources-error")},__checkLocalizationCache:function __checkLocalizationCache(proto){if(proto===void 0)return;if(proto.__localizationCache===void 0){proto.__localizationCache={requests:{},messages:{},ajax:null}}}}})();</script>
</head><body></body></html>