<html><head><script>(function(){"use strict";window.PxAppBehavior=window.PxAppBehavior||{};PxAppBehavior.AssetFavoritable={properties:{favorited:{type:Object,notify:!0,value:function value(){return[]}},favoritedRoute:{type:Array,notify:!0,value:function value(){return[]}},favoritedMeta:{type:Object,notify:!0,readOnly:!0,value:null,computed:"_getFavoritedMeta(favorited.*)"}},created:function created(){this._lastFavorite={source:null,reason:null,item:null}},observers:["_favoritedChanged(favorited.*)","_favoritedRouteChanged(favoritedRoute.*)"],listeners:{"px-app-asset-graph-created":"__favoriteInitialAssets","px-app-asset-should-be-favorited":"_assetFavoritedByEvent","px-app-asset-should-be-defavorited":"_assetDefavoritedByEvent"},multiFavorite:!0,favorite:function favorite(item){var source=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"METHOD";if(!this.multiFavorite&&null===item&&null!==this._lastFavorite.item||this.multiFavorite&&null===item&&this.favorited.length||this.multiFavorite&&Array.isArray(item)&&!item.length&&this.favorited.length){this.defavorite(Array.isArray(this.favorited)?babelHelpers.toConsumableArray(this.favorited):this.favorited);return this.favorited}if(!item||!this.multiFavorite&&item===this._lastFavorite.item||this.multiFavorite&&-1<this.favorited.indexOf(item))return this.favorited;if(this.multiFavorite&&Array.isArray(item)&&item.length){for(var i=0;i<item.length;i++){this.favorite(item[i],source)}return this.favorited}if(this._assetGraph.hasNode(item)){this._favoriteAsset(item,source);return this.favorited}else{throw new Error("The following item could not be found in the items graph:\n          ".concat(JSON.stringify(item)))}},defavorite:function defavorite(item){var source=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"METHOD";if(!this.multiFavorite&&(!item||this.favorited===item)){this._defavoriteAsset(this.favorited);return this.favorited}if(this.multiFavorite&&!item){this.defavorite(babelHelpers.toConsumableArray(this.favorited));return this.favorited}if(this.multiFavorite&&Array.isArray(item)&&this.favorited.length){for(var i=0;i<item.length;i++){this.defavorite(item[i],source)}return this.favorited}if(this.multiFavorite&&item&&-1<this.favorited.indexOf(item)){this._defavoriteAsset(item);return this.favorited}},_getFavoritedMeta:function _getFavoritedMeta(favorited){var _this=this;if(favorited.base&&!Array.isArray(favorited.base)&&this._assetGraph&&this._assetGraph.hasNode(favorited.base)){var _this$_assetGraph$get=this._assetGraph.getInfo(favorited.base,this.keys.id),path=_this$_assetGraph$get.path,route=_this$_assetGraph$get.route,parent=_this$_assetGraph$get.parent,children=_this$_assetGraph$get.children,siblings=_this$_assetGraph$get.siblings;return{item:favorited.base,path:path,route:route,parent:parent,children:children,siblings:siblings}}if(favorited.base&&Array.isArray(favorited.base)&&favorited.base.length){return favorited.base.map(function(item){var _this$_assetGraph$get2=_this._assetGraph.getInfo(item,_this.keys.id),path=_this$_assetGraph$get2.path,route=_this$_assetGraph$get2.route,parent=_this$_assetGraph$get2.parent,children=_this$_assetGraph$get2.children,siblings=_this$_assetGraph$get2.siblings;return{item:item,path:path,route:route,parent:parent,children:children,siblings:siblings}})}return{item:null,path:null,route:null,parent:null,children:null,siblings:null}},_assetFavoritedByEvent:function _assetFavoritedByEvent(evt){evt.stopPropagation();if(evt.detail.item){this.favorite(evt.detail.item,"DOM_EVENT")}},_assetDefavoritedByEvent:function _assetDefavoritedByEvent(evt){evt.stopPropagation();if(evt.detail.item){this.defavorite(evt.detail.item,"DOM_EVENT")}},_favoritedRouteChanged:function _favoritedRouteChanged(ref){if(!ref||!ref.path||!this._assetGraph||this._squashFavoritedRouteChange)return;if(!this.multiFavorite&&"favoritedRoute"===ref.path){this._updateFavoritedFromRoute(ref.base)}if(this.multiFavorite&&("favoritedRoute"===ref.path||"favoritedRoute.splices"==ref.path)){this._updateFavoritedFromRouteMulti(ref.base)}},_updateFavoritedFromRoute:function _updateFavoritedFromRoute(route){if(this.favorited&&(null===route||Array.isArray(route)&&!route.length)){this._squashFavoritedChange=!0;this.defavorite(this.favorited,"ROUTE_CHANGED");this._squashFavoritedChange=!1;return}var item=this._assetGraph.getNodeAtRoute(route);if(item===this.favorited){return}else if(item){this.favorite(item,"ROUTE_CHANGED")}else{throw new Error("The route ".concat(JSON.stringify(route)," could not be found in the items graph."))}},_updateFavoritedFromRouteMulti:function _updateFavoritedFromRouteMulti(route){var _this2=this;if(this.favorited.length&&(null===route||Array.isArray(route)&&!route.length)){this._squashFavoritedChange=!0;this.defavorite(null,"ROUTE_CHANGED");this._squashFavoritedChange=!1;return}if(Array.isArray(route)){for(var i=0;i<route.length;i++){this._squashFavoritedChange=!0;this.favorited=route.map(function(route){var item=_this2._assetGraph.getNodeAtRoute(route);if(!item){throw new Error("The following item could not be found in the items graph:\n                  ".concat(JSON.stringify(item)))}return item});this._squashFavoritedChange=!1}}},_favoritedChanged:function _favoritedChanged(ref){if(!ref||!ref.path||this._squashFavoritedChange||!this._assetGraph)return;if(!this.multiFavorite&&"favorited"===ref.path&&"undefined"!==typeof this.favoritedRoute){this._updateFavoritedRoute(ref.base)}if(this.multiFavorite&&("favorited"===ref.path||"favorited.splices"===ref.path)&&"undefined"!==typeof this.favoritedRoute){this._updateFavoritedRouteMulti(ref.base)}},_checkIfEmpty:function _checkIfEmpty(item){if(Array.isArray(item))return!!item.length;return!!item},_updateFavoritedRoute:function _updateFavoritedRoute(favorited){if(this._checkIfEmpty(favorited)){if(!this._assetGraph.hasNode(favorited)){throw new Error("The following item could not be found in the items graph:\n              ".concat(JSON.stringify(favorited)));return}var route=this._assetGraph.getRoute(favorited,this.keys.id);if(this._routeIsDifferent(route,this.favoritedRoute)){this._squashFavoritedRouteChange=!0;this.favoritedRoute=route;this._squashFavoritedRouteChange=!1}}else{this._squashFavoritedRouteChange=!0;this.favoritedRoute=null;this._squashFavoritedRouteChange=!1}},_updateFavoritedRouteMulti:function _updateFavoritedRouteMulti(favorited){var _this3=this;if(favorited&&Array.isArray(favorited)&&favorited.length){this._squashFavoritedRouteChange=!0;this.favoritedRoute=favorited.map(function(item){if(!_this3._assetGraph.hasNode(item)){throw new Error("The following item could not be found in the items graph:\n                ".concat(JSON.stringify(item)))}return _this3._assetGraph.getRoute(item,_this3.keys.id)});this._squashFavoritedRouteChange=!1}else{this._squashFavoritedRouteChange=!0;this.favoritedRoute=[];this._squashFavoritedRouteChange=!1}},__favoriteInitialAssets:function __favoriteInitialAssets(){if(!this.multiFavorite&&this.favorited&&!this.favoritedRoute){this._updateFavoritedRoute(this.favorited)}else if(!this.multiFavorite&&!this.favorited&&this.favoritedRoute){this._updateFavoritedFromRoute(this.favoritedRoute)}else if(this.multiFavorite&&this.favorited.length&&!this.favoritedRoute.length){this._updateFavoritedRouteMulti(this.favorited)}else if(this.multiFavorite&&!this.favorited.length&&this.favoritedRoute.length){this._updateFavoritedFromRouteMulti(this.favorited)}},_routeIsDifferent:function _routeIsDifferent(r1,r2){if(!r1||!r2)return!0;if(r1.length!==r2.length)return!0;for(var i=0;i<r1.length;i++){if(r1[i]!==r2[i])return!0}return!1},_favoriteAsset:function _favoriteAsset(item,source){var _this$_assetGraph$get3=this._assetGraph.getInfo(item,this.keys.id),route=_this$_assetGraph$get3.route,path=_this$_assetGraph$get3.path;this._lastFavorite={item:item,source:source,route:route};if(!this.multiFavorite){this.favorited=item}if(this.multiFavorite){this.push("favorited",item)}this.fire("px-app-asset-favorited",{source:source,item:item,route:route,path:path})},_defavoriteAsset:function _defavoriteAsset(item,source){var _this$_assetGraph$get4=this._assetGraph.getInfo(item,this.keys.id),route=_this$_assetGraph$get4.route,path=_this$_assetGraph$get4.path;this._lastFavorite={item:null,source:null,route:null};if(!this.multiFavorite){this.set("favorited",null);this.fire("px-app-asset-defavorited",{source:source,item:item,route:route,path:path})}if(this.multiFavorite){this.splice("favorited",this.favorited.indexOf(item),1);this.fire("px-app-asset-defavorited",{source:source,item:item,route:route,path:path})}}}})();</script>
</head><body></body></html>