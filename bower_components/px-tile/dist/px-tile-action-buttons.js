"use strict";(function(){Polymer({is:"px-tile-action-buttons",properties:{hoverTextColor:{type:String,value:""},overlay:{type:Boolean,value:!1},primary:{type:Boolean,value:!1},actionButtons:{type:Object,value:{},observer:"_actionButtonsChanged"}},attached:function attached(){this.listen(this,"px-dropdown-selection-changed","_itemSelected")},detached:function detached(){this.unlisten(this,"px-dropdown-selection-changed","_itemSelected")},_actionButtonsChanged:function _actionButtonsChanged(){this._notifyActionChange=!1;var actionBtns=JSON.parse(JSON.stringify(this.actionButtons)),maxButtons=actionBtns.maxButtons||3,maxPrimaryButtons=actionBtns.maxPrimaryButtons||1,primaryBtns=[],btns=[];for(var x in actionBtns.items){if(actionBtns.items[x].isPrimary){if(primaryBtns.length<maxPrimaryButtons){primaryBtns.push(actionBtns.items[x])}else{delete actionBtns.items[x].isPrimary}}if(!actionBtns.items[x].isPrimary){btns.push(actionBtns.items[x])}}this._isDisplayDropdown=!1;if(this.primary){actionBtns.items=primaryBtns}else{actionBtns.items=btns;this._isDisplayDropdown=actionBtns.items.length>maxButtons}this._isDisplayButtons=!1;if(this._isDisplayDropdown){this._setupDropdownButtons(actionBtns)}else{this._items=actionBtns.items;this._isDisplayButtons=!0}this._notifyActionChange=!0},_setupDropdownButtons:function _setupDropdownButtons(actionBtns){this.async(function(){var pxDropdown=this.$$("#pxDropdown");pxDropdown.style.height="20px";for(var x in actionBtns.items){var item=actionBtns.items[x];item.key=item.id||item.key;item.val=item.label||item.val;delete item.id;delete item.label;if(!actionBtns.multi){delete item.selected}}if(actionBtns.sortMode&&"label"===actionBtns.sortMode){actionBtns.sortMode="val"}else if("val"!==actionBtns.sortMode){actionBtns.sortMode="key"}if(actionBtns.selectBy&&"label"===actionBtns.selectBy){actionBtns.selectBy="val"}else if("val"!==actionBtns.selectBy){actionBtns.selectBy="key"}for(var id in actionBtns){pxDropdown.set(id,actionBtns[id])}this._items=actionBtns.items;this.async(function(){var dropdown=Polymer.dom(pxDropdown.root).querySelector("#dropdown");dropdown.set("horizontalAlign","right");var button=Polymer.dom(pxDropdown.root).querySelector("#button");this.button=button;this.pxIcon=Polymer.dom(button).querySelector("px-icon");if(this.pxIcon){this.pxIcon.style.right="-6px";if(this.overlay){this.pxIcon.style.color=this.hoverTextColor}}})},100)},_onSelected:function _onSelected(evt){var item=evt.detail.model||evt.model.item;this._handleSelection({label:item.label,id:item.id})},_itemSelected:function _itemSelected(evt){var pxDropdown=this.$$("#pxDropdown");if(this.actionButtons.multi||pxDropdown._displayValueSelected===evt.detail.val){this._handleSelection({label:evt.detail.val,id:evt.detail.key})}},_handleSelection:function _handleSelection(detail){if(this._notifyActionChange){this.fire("px-tile-action-tapped",detail)}},_getBtnClazz:function _getBtnClazz(item){var clazzset=this._getBtnSize(item.size);clazzset=this._getBtnType(item.type,clazzset);if(!0===item.buttonIcon){clazzset.push("btn--icon")}if(!0===item.disabled){clazzset.push("btn--disabled")}if(this.primary&&!item.isPrimary||!this.primary&&item.isPrimary){clazzset.push("hidden")}return clazzset.join(" ").trim()},_getBtnType:function _getBtnType(type,array){array=array||[];if(type){switch(type.trim()){case"primary":array.push("btn--primary");break;case"call to action":array.push("btn--call-to-action");break;case"tertiary":array.push("btn--tertiary");break;case"bare":array.push("btn--bare");if(this.overlay){array.push("btn-overlay")}break;case"bare primary":array.push("btn--bare--primary");if(this.overlay){array.push("btn-overlay")}else{array.push("btn-tile-bare-primary")}break;}}return array},_getBtnSize:function _getBtnSize(size,array){array=array||[];if(size){switch(size.trim()){case"small":array.push("btn--small");break;case"large":array.push("btn--large");break;case"huge":array.push("btn--huge");break;case"full":array.push("btn--full");break;}}return array},_getBtnColor:function _getBtnColor(item){var color="";if(item.color){color="color: "+item.color+"; stroke: "+item.color+"; "}return color}})})();