<!--
Copyright (c) 2018, General Electric

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--><html><head><link rel="import" href="px-vis-polyfills.html">
<link rel="import" href="px-vis-behavior-colors.html">


<script>var PxVisBehavior=window.PxVisBehavior=window.PxVisBehavior||{};PxVisBehavior.observerCheck={hasUndefinedArguments:function hasUndefinedArguments(args){for(var i=0;i<args.length;i++){if(args[i]===void 0||args[i]&&args[i].path&&args[i].hasOwnProperty("base")&&args[i].base===void 0){return!0}}return!1}};PxVisBehavior.baseSize={properties:{width:{type:Number,notify:!0},height:{type:Number,notify:!0}}};PxVisBehavior.margins={properties:{_defaultMargin:{type:Object,value:function value(){return{left:0,right:0,top:0,bottom:0}}},margin:{type:Object,value:function value(){return{left:0,right:0,top:0,bottom:0}}}}};PxVisBehavior.sizing=[{properties:{offset:{type:Array,value:function value(){return[0,0]}}}},PxVisBehavior.baseSize,PxVisBehavior.margins];PxVisBehavior.truncating={properties:{truncationLength:{type:Number,value:10}},_truncateName:function _truncateName(name,len){var len=len||this.truncationLength;if(2>len){return name}if(name.length<=len){return name}var frontLen=Math.ceil(len/2),backLen=Math.floor(len/2),front=name.slice(0,frontLen),back=name.slice(-backLen);return front+"..."+back}};PxVisBehavior.formatting=[{properties:{numberFormatCulture:{type:String},numberFormatIsCurrency:{type:Boolean,value:!1},numberFormatCurrency:{type:String,value:"$0,0.00"},numberFormatDefault:{type:String,value:"0,0.0000"},numberFormat:{type:String,value:"0,0.00"},numberFormatUnformat:{type:String,value:"0,0.0000"},numberFormatZero:{type:String,value:"0"}}},PxVisBehavior.truncating];PxVisBehavior.dataChecks={_isValidData:function _isValidData(d){return d||0===d},_isDataNotNull:function _isDataNotNull(d){return null!==d}};PxVisBehavior.dataset=[{properties:{chartData:{type:Array}}},PxVisBehavior.dataChecks];PxVisBehavior.completeSeriesConfig={properties:{completeSeriesConfig:{type:Object,notify:!0}}};PxVisBehavior.combinedMutedSeries={properties:{combinedMutedSeries:{type:Object,notify:!0,value:function value(){return{}}}}};PxVisBehavior.mutedSeries=[{properties:{mutedSeries:{type:Object,notify:!0,value:function value(){return{}}},hardMute:{type:Boolean,value:!1}}},PxVisBehavior.completeSeriesConfig];PxVisBehavior.seriesKeys={properties:{seriesKeys:{type:Array,value:function value(){return[]}}}};PxVisBehavior.mutedCompleteSeriesConfig=[{properties:{_mutedCompleteSeriesConfig:{type:Object,computed:"_computeMutedCompleteSeriesConfig(completeSeriesConfig, hardMute, mutedSeries.*)"},_nonMutedSeriesKeys:{type:Array,computed:"_computeNonMutedSeriesKeys(_mutedCompleteSeriesConfig,seriesKeys)"}},_computeNonMutedSeriesKeys:function _computeNonMutedSeriesKeys(){if(this.hasUndefinedArguments(arguments)){return}if(!(this._mutedCompleteSeriesConfig===void 0||this.seriesKeys===void 0)){var keys=Object.keys(this._mutedCompleteSeriesConfig);return keys.filter(function(key){return-1!==this.seriesKeys.indexOf(key)}.bind(this))}},_computeMutedCompleteSeriesConfig:function _computeMutedCompleteSeriesConfig(completeSeriesConfig,hardMute,mutedSeries){if(this.hasUndefinedArguments(arguments)){return}if(!(this.completeSeriesConfig===void 0||this.hardMute===void 0||this.mutedSeries===void 0)){if(!this.hardMute){return this.completeSeriesConfig}else{for(var newConf={},keys=Object.keys(this.completeSeriesConfig),i=0;i<keys.length;i++){if(!this.mutedSeries[keys[i]]){newConf[keys[i]]=this.completeSeriesConfig[[keys[i]]]}}return newConf}}}},PxVisBehavior.observerCheck,PxVisBehavior.completeSeriesConfig,PxVisBehavior.mutedSeries,PxVisBehavior.seriesKeys];PxVisBehavior.muteUnmuteSeries=[{properties:{},muteUnmuteSeries:function muteUnmuteSeries(series,fromRegister){if(-1===series.indexOf(".")){if("undefined"===typeof this.mutedSeries[series]){this.set("mutedSeries."+series,!0)}else{this.set("mutedSeries."+series,!this.mutedSeries[series])}}else{var muted=this.mutedSeries;this.mutedSeries=[];muted[series]="undefined"===typeof muted[series]?!0:!muted[series];this.set("mutedSeries",muted)}this.fire("px-vis-muted-series-updated",{name:series,value:this.mutedSeries[series],fromRegister:fromRegister})}},PxVisBehavior.mutedSeries];PxVisBehavior.tooltipData={properties:{tooltipData:{type:Object,notify:!0},defaultEmptyData:{type:Object,value:null,notify:!0}}};PxVisBehavior.crosshairData={properties:{crosshairData:{type:Object,notify:!0},generatingCrosshairData:{type:String,value:!1,notify:!0},crosshairPixelSearch:{type:Number,value:0}}};PxVisBehavior.extentsData={properties:{extentsData:{type:Object,notify:!0},extentsAction:{type:String,notify:!0}}};PxVisBehavior.commonMethods=[{_isObjEmpty:function _isObjEmpty(obj){if("undefined"===typeof obj||null===obj){return!0}if(obj.length){return!obj.length}return!this._hasProps(obj)},_isD3Empty:function _isD3Empty(obj){if(this._isObjEmpty(obj)){return!0}return obj.empty()},_doesD3HaveValues:function _doesD3HaveValues(obj){if(this._isObjEmpty(obj)){return!1}return!obj.empty()},_doesObjHaveValues:function _doesObjHaveValues(obj){if("undefined"===typeof obj||null===obj){return!1}if(obj.length){return!!obj.length}return this._hasProps(obj)},_hasProps:function _hasProps(obj){var i=0;for(var prop in obj){if(Object.prototype.hasOwnProperty.call(obj,prop)){i++;break}}return 0!==i},_isVarDefined:function _isVarDefined(obj){if("undefined"===typeof obj){return!1}return!0},_isVarUndefined:function _isVarUndefined(obj){if("undefined"===typeof obj){return!0}return!1},_escapeCssSelector:function _escapeCssSelector(selector){return selector.replace(".","\\.")},_checkThemeVariable:function _checkThemeVariable(varName,defaultValue){var themeVar;if(Polymer.Element){if(window.ShadyCSS){themeVar=ShadyCSS.getComputedStyleValue(this,varName)}else{themeVar=getComputedStyle(this).getPropertyValue(varName)}}else{themeVar=this.getComputedStyleValue(varName)}return!themeVar||0===themeVar.length?defaultValue:themeVar},_hexToRgb:function _hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?"rgb("+parseInt(result[1],16)+","+parseInt(result[2],16)+","+parseInt(result[3],16)+")":null},_binarySearch:function _binarySearch(data,key,val,lowerIndex,upperIndex){if(this.isVarNumber(lowerIndex)&&this.isVarNumber(upperIndex)&&lowerIndex===upperIndex){return null}var upperIndex=this.isVarNumber(upperIndex)?upperIndex:data.length,lowerIndex=this.isVarNumber(lowerIndex)?lowerIndex:0,index=Math.floor((upperIndex-lowerIndex)/2)+lowerIndex,dataVal=+data[index][key];if(dataVal===val){return data[index]}else if(val<dataVal){return this._binarySearch(data,key,val,lowerIndex,index)}else if(val>dataVal){return this._binarySearch(data,key,val,index+1,upperIndex)}return null},_fuzzyBinarySearch:function _fuzzyBinarySearch(data,key,lowerFuzz,upperFuzz,lowerIndex,upperIndex){if(this.isVarNumber(lowerIndex)&&this.isVarNumber(upperIndex)&&lowerIndex>=upperIndex){return null}var upperIndex=this.isVarNumber(upperIndex)?upperIndex:data.length,lowerIndex=this.isVarNumber(lowerIndex)?lowerIndex:0,index=Math.floor((upperIndex-lowerIndex)/2)+lowerIndex,dataVal=+data[index][key];if(dataVal>=lowerFuzz&&dataVal<=upperFuzz){return this._getAdjacentValues(data,key,lowerFuzz,upperFuzz,lowerIndex,upperIndex,index)}else if(upperFuzz<dataVal){return this._fuzzyBinarySearch(data,key,lowerFuzz,upperFuzz,lowerIndex,index)}else if(lowerFuzz>dataVal){return this._fuzzyBinarySearch(data,key,lowerFuzz,upperFuzz,index+1,upperIndex)}return null},_getAdjacentValues:function _getAdjacentValues(data,key,lowerFuzz,upperFuzz,lowerIndex,upperIndex,index){for(var d=[],i=index-1;i>lowerIndex;i--){if(data[i][key]<lowerFuzz){break}if(!this.hardMute||!this.mutedSeries[data[i][key]]){d.splice(0,0,data[i])}}if(!this.hardMute||!this.mutedSeries[data[index][key]]){d.push(data[index])}for(var i=index+1;i<upperIndex;i++){if(data[i][key]>upperFuzz){break}if(!this.hardMute||!this.mutedSeries[data[i][key]]){d.push(data[i])}}return d},clone:function clone(object,newObject){var newObject=newObject||{};for(var i in object){if(object.hasOwnProperty(i)){if("object"===babelHelpers.typeof(object[i])&&null!==object[i]){newObject[i]=Array.isArray(object[i])?[]:{};this.clone(object[i],newObject[i])}else{newObject[i]=object[i]}}}return newObject},isVarNumber:function isVarNumber(n){return!isNaN(parseFloat(n))&&!isNaN(n-0)}},PxVisBehavior.dataChecks];PxVisBehavior.axisTypes={properties:{xAxisType:{type:String,value:"linear"},yAxisType:{type:String,value:"linear"}}};PxVisBehavior.zoomSelection={properties:{selectionType:{type:String,value:"xy"}}};PxVisBehavior.chartExtents={properties:{chartExtents:{type:Object,notify:!0}}};PxVisBehavior.dataExtents={properties:{dataExtents:{type:Object,notify:!0}}};PxVisBehavior.amplitudeExtents={properties:{amplitudeExtents:{type:Array,value:function value(){return[]}}}};PxVisBehavior.events={properties:{eventConfig:{type:Object},defaultEventConfig:{type:Object},eventData:{type:Array}}};PxVisBehavior.markers={properties:{markerConfig:{type:Object},markerData:{type:Array}}};PxVisBehavior.thresholds={properties:{thresholdConfig:{type:Object,value:function value(){return{}}},_defaultThresholdConfig:{type:Object,value:function value(){return{strokeWidth:"1",dashPattern:"5,2"}}},thresholdData:{type:Array}}};PxVisBehavior.dimensions={properties:{axes:{type:Array},dimensions:{type:Array,notify:!0},seriesKey:{type:String}}};PxVisBehavior.categories={properties:{categoryKey:{type:String},categories:{type:Array,value:function value(){return[]}}}};PxVisBehavior.commonAxis={properties:{commonAxis:{type:Boolean,value:!1}}};PxVisBehavior.polarData={properties:{counterClockwise:{type:Boolean,value:!1},useDegrees:{type:Boolean,value:!1}},_getPixelCoordForRadialData:function _getPixelCoordForRadialData(dataX,dataY,yRange,yDomain,yDomainTot){var result=[],angle=dataX,pixelAmplitude=yRange*(dataY-yDomain[0])/yDomainTot;angle=this._adjustAngleForPolarChart(angle,!1);result[1]=Math.cos(angle)*pixelAmplitude;result[0]=Math.sin(angle)*pixelAmplitude;return result},_adjustAngleForPolarChart:function _adjustAngleForPolarChart(angle,toDegrees){var _MathPI=Math.PI,offset=toDegrees?180:_MathPI;if(!this.counterClockwise&&!toDegrees||this.counterClockwise&&toDegrees){angle*=-1}if(this.useDegrees){if(toDegrees){return angle+offset}else{return 2*(angle/360)*_MathPI+offset}}else{if(toDegrees){return 360*(angle/(2*_MathPI))+offset}else{return angle+offset}}}};PxVisBehavior.seriesId={properties:{seriesId:{type:String}}};PxVisBehavior.dynamicConfigProperties=[{properties:{_dynamicProperties:{type:Array,value:function value(){return[]}}},observers:["_processConfig(completeSeriesConfig.*, seriesId)"],_computeValue:function _computeValue(configValue,def){return"undefined"!==typeof configValue&&null!==configValue?configValue:def},_processConfig:function _processConfig(completeSeriesConfig,seriesId){if(this.hasUndefinedArguments(arguments)){return}var conf=this.completeSeriesConfig[this.seriesId],name;if(conf){for(var i=0;i<this._dynamicProperties.length;i++){name=this._dynamicProperties[i];this.set(name,this._computeValue(conf[name],this["_default"+name]))}}},_watchConfigProperty:function _watchConfigProperty(name,defValue){this._dynamicProperties.push(name);this["_default"+name]=defValue;if(this.completeSeriesConfig&&this.seriesId){var conf=this.completeSeriesConfig[this.seriesId];this[name]=this._computeValue(conf[name],defValue)}}},PxVisBehavior.observerCheck,PxVisBehavior.completeSeriesConfig,PxVisBehavior.seriesId];PxVisBehavior.radial={properties:{radial:{type:Boolean,value:!1}}};PxVisBehavior.forceDateTimeDisplay={properties:{forceDateTimeDisplay:{type:Boolean,value:!1}}};PxVisBehavior.serieToRedrawOnTop={properties:{serieToRedrawOnTop:{type:Array}}};PxVisBehavior.svgDefinition={properties:{svg:{type:Object}}};PxVisBehavior.svgLowerDefinition={properties:{svgLower:{type:Object,notify:!0}}};PxVisBehavior.dynamicMenuConfig={properties:{dynamicMenuConfig:{type:Array}}};PxVisBehavior.actionConfig={properties:{actionConfig:{type:Object,notify:!0}}};PxVisBehavior.toolbarConfig={properties:{toolbarConfig:{type:Object,value:function value(){return{zoom:!0,pan:!0,tooltip:!0}}}}};PxVisBehavior.seriesToAxes={properties:{seriesToAxes:{type:Object}}};PxVisBehavior.uniqueIds={properties:{_uniqueIdsUsed:{type:Array,value:function value(){return[]}}},detached:function detached(){if(this._uniqueIdsUsed){for(var i=0;i<this._uniqueIdsUsed.length;i++){Px.uniqueIds.splice(Px.uniqueIds.indexOf(this._uniqueIdsUsed[i]),1)}this._uniqueIdsUsed=[]}},generateRandomID:function generateRandomID(baseStr){for(var id=baseStr,abc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",len=abc.length,i=0;10>i;i++){id+=abc.charAt(Math.floor(Math.random()*len))}Px.uniqueIds=Px.uniqueIds||[];if(-1!==Px.uniqueIds.indexOf(id)){return this.generateRandomID(baseStr)}else{Px.uniqueIds.push(id)}this._uniqueIdsUsed.push(id);return id}};PxVisBehavior.preventInitialDrawing={properties:{preventInitialDrawing:{type:Boolean,value:!1}}};PxVisBehavior.selectionType={properties:{selectionType:{type:String,notify:!0,value:"xy"}}};PxVisBehavior.measureText={properties:{_measurementCanvas:{type:Object},_measurementCanvasContext:{type:Object}},_createMeasurementCanvas:function _createMeasurementCanvas(width,height,font){var canvas=document.createElement("canvas");canvas.height=height||this.height;canvas.width=width||9999;this._measurementCanvas=canvas;if(font){var ctx=this._measurementCanvas.getContext("2d");ctx.font=font}},_measureTextOnCanvas:function _measureTextOnCanvas(text){if(!this._measurementCanvas){this._createMeasurementCanvas()}var context=this._measurementCanvas.getContext("2d"),textSize=context.measureText(text);return textSize}};PxVisBehavior.isAttached={properties:{_isAttached:{type:Boolean,value:!1}},detached:function detached(){this._isAttached=!1},attached:function attached(){this.set("_isAttached",!0)}};PxVisBehavior.waitForAnimationFrame={properties:{_animationFrameDone:{type:Boolean,value:!1}},ready:function ready(){window.requestAnimationFrame(function(){this._animationFrameDone=!0}.bind(this))}};PxVisBehavior.actionConfigGeneric={properties:{actionConfig:{type:Object}}};PxVisBehavior.applyActionConfig=[{properties:{handlersCount:{type:Object,value:function value(){return{}}}},_deletePreviousActions:function _deletePreviousActions(d3Elem,eventType){for(var keys=Object.keys(this.handlersCount),count=this.handlersCount[eventType]?this.handlersCount[eventType]:0,j=0;j<count;j++){d3Elem.on(eventType+"."+j,null)}this.handlersCount[eventType]=0},_setupRegularActions:function _setupRegularActions(d3Elem,elem,dontDoUpDown){for(var keys=Object.keys(this.actionConfig),mouseEvent,action,mappedAction,allActions,bindingContext=this,toBeUsed,noChartContext,i=0;i<keys.length;i++){mouseEvent=keys[i];this._deletePreviousActions(d3Elem,mouseEvent);if(dontDoUpDown&&("mousedown"===mouseEvent||"mouseup"===mouseEvent)){continue}allActions=Array.isArray(this.actionConfig[keys[i]])?this.actionConfig[keys[i]]:[this.actionConfig[keys[i]]];for(var j=0;j<allActions.length;j++){action=allActions[j];mappedAction=this[this.actionMapping[action]];noChartContext=!1;if(mappedAction&&"function"===typeof mappedAction){toBeUsed=mappedAction;noChartContext=!0}else if("function"===typeof action){toBeUsed=action}else if("string"===typeof action&&action&&"null"!=action){toBeUsed=eval("var f = function() { return "+action+";}; f();")}else{toBeUsed=null}if(toBeUsed){var wrapper;if(noChartContext){wrapper=toBeUsed.bind(this)}else{var _this=this;wrapper=function(evt){_this.fire("px-vis-action-request",{function:this,data:{mouseCoords:Px.d3.mouse(elem),target:elem}})}.bind(toBeUsed)}d3Elem.on(mouseEvent+"."+j,wrapper);this.handlersCount[mouseEvent]++}}}}},PxVisBehavior.actionConfigGeneric];PxVisBehavior.interactionSpaceConfigGeneric={properties:{interactionSpaceConfig:{type:Object}}};PxVisBehavior.interactionSpaceShared=[{_resetTooltipData:function _resetTooltipData(){if(this.seriesKeys===void 0){return}var ttD;this.set("_calculatingData",!1);if(this.defaultEmptyData){ttD=this.defaultEmptyData}else{ttD={time:null,timeSeriesKey:null,hidden:!0,series:[],seriesObj:{},mouse:null,xArr:null,yArr:null};for(var keys=this.seriesKeys,len=keys.length,i=0;i<len;i++){ttD.series.push({name:keys[i],value:null})}}this.set("tooltipData",ttD);this.fire("px-vis-tooltip-updated",{dataVar:"tooltipData",data:ttD,method:"set"})},_createTooltipDataStub:function _createTooltipDataStub(mousePos,timestamp,showTooltip){return{time:timestamp,timeSeriesKey:null,hidden:showTooltip,series:[],seriesObj:{},mouse:mousePos,xArr:[],yArr:[],rawData:[],timeStamps:[],timeStampsTracker:{},additionalPoints:[]}}},PxVisBehavior.observerCheck,PxVisBehavior.polarData];PxVisBehavior.highlightShared=[{properties:{differentDataset:{type:Boolean,value:!1},fuzz:{type:Number,value:0},timeData:{type:String,value:"Timestamp"},layersToMask:{type:Array},drawWithLocalCrosshairData:{type:Boolean,value:!1,notify:!0}},_calcDataset:function _calcDataset(){for(var d=[],lowerFuzz,upperFuzz,i=0;i<this.crosshairData.timeStamps.length;i++){if(!this.hardMute||!this.mutedSeries[this.crosshairData.timeStamps[i]]){if(this.fuzz){lowerFuzz=this.crosshairData.timeStamps[i]-+this.fuzz;upperFuzz=this.crosshairData.timeStamps[i]+ +this.fuzz;if(d.length){lowerFuzz=lowerFuzz<=d[d.length-1][this.timeData]?d[d.length-1][this.timeData]+1:lowerFuzz}Array.prototype.push.apply(d,this._fuzzyBinarySearch(this.chartData,this.timeData,+lowerFuzz,+upperFuzz,null,null))}else{d.push(this._binarySearch(this.chartData,this.timeData,+this.crosshairData.timeStamps[i],null,null))}}}return null===d[0]?[]:d},_generateSeries:function _generateSeries(dataset){for(var keys=this.seriesKeys,arr=[],i=0;i<keys.length;i++){if(!this.hardMute||!this.mutedSeries[keys[i]]){var val={},x=this.completeSeriesConfig[keys[i]].x,y=this.completeSeriesConfig[keys[i]].y,coords=[],axis="function"===typeof this.y?this.y:this.y[this.completeSeriesConfig[keys[i]].axis.id];val[x]=dataset[x];val[y]=dataset[y];if(this.radial){var domain=axis.domain(),range=axis.range(),dr=range[1]-range[0],dd=domain[1]-domain[0];coords=this._getPixelCoordForRadialData(dataset[x],dataset[y],dr,domain,dd)}else{coords.push(this.x(val[x]));coords.push(axis(val[y]))}arr.push({name:keys[i],value:val,coord:coords})}else{arr.push({name:keys[i],value:null,coord:[]})}}return arr},_setTooltipData:function _setTooltipData(dataset){var ttd=null;if(dataset&&dataset.length){var timestamp=this.timeData?dataset[0][this.timeData]:null,series=this._generateSeries(dataset[0]);if(series.length){ttd=this._createTooltipDataStub(series[0].coord,timestamp,!this.hideTooltip);ttd.series=series;ttd.seriesObj={};ttd.series.forEach(function(item){ttd.seriesObj[item.name]=item})}}this.set("defaultEmptyData",ttd)}},PxVisBehavior.interactionSpaceShared];PxVisBehavior.canvasLayersConfig={properties:{canvasLayersConfig:{type:Object,value:function value(){return{}}}}};PxVisBehavior.highlightCanvasShared=[{observers:["_requestCanvasCreation(_highlightData, canvasLayersConfig)","_muteDataSeries(_highlightData, layersToMask)","_addTransition(layersToMask)"],_muteDataSeries:function _muteDataSeries(){if(this.hasUndefinedArguments(arguments)){return}if(this.layersToMask){if(!Array.isArray(this.layersToMask)){this.toggleClass("secondaryDataMask",this._highlightData.length,this.layersToMask.canvas)}else{for(var i=0;i<this.layersToMask.length;i++){this.toggleClass("secondaryDataMask",this._highlightData.length,this.layersToMask[i].canvas)}}}},_addTransition:function _addTransition(){if(this.hasUndefinedArguments(arguments)){return}if(Array.isArray(this.layersToMask)){for(var i=0;i<this.layersToMask.length;i++){this.layersToMask[i].canvas.style.transition="opacity 0.2s"}}else{this.layersToMask.canvas.style.transition="opacity 0.2s"}},_requestCanvasCreation:function _requestCanvasCreation(){if(this.hasUndefinedArguments(arguments)){return}if(!this.canvasLayersConfig.highlighter){this.set("canvasLayersConfig.highlighter",{})}}},PxVisBehavior.observerCheck,PxVisBehavior.highlightShared,PxVisBehavior.canvasLayersConfig];PxVisBehavior.highlightSvgShared=[{observers:["_muteDataSeries(_highlightData, layersToMask)","_addTransition(layersToMask)"],_muteDataSeries:function _muteDataSeries(data){if(this.hasUndefinedArguments(arguments)){return}if(this.layersToMask){if(!Array.isArray(this.layersToMask)){this.toggleClass("secondaryDataMask",data.length,this.layersToMask.node())}else{for(var i=0;i<this.layersToMask.length;i++){this.toggleClass("secondaryDataMask",data.length,this.layersToMask[i].node())}}}},_addTransition:function _addTransition(){if(this.hasUndefinedArguments(arguments)){return}if(!Array.isArray(this.layersToMask)){this.layersToMask.node().style.transition="opacity 0.2s"}else{for(var i=0;i<this.layersToMask.length;i++){this.layersToMask[i].node().style.transition="opacity 0.2s"}}}},PxVisBehavior.observerCheck,PxVisBehavior.highlightShared];PxVisBehavior.highlightLineShared=[{properties:{_highlightData:{type:Object,notify:!0},parallelCoordinates:{type:Boolean,value:!1},radialLine:{type:Boolean,value:!1}},observers:["_computeChartData(crosshairData.timeStamps.*, drawWithLocalCrosshairData, differentDataset, domainChanged, completeSeriesConfig)"],_computeChartData:function _computeChartData(){if(this.hasUndefinedArguments(arguments)){return}this.debounce("_computeHighlightData",function(){if(this.generatingCrosshairData&&!this.drawWithLocalCrosshairData&&0<this.crosshairData.rawData.length){return[]}var dataset;if(this.differentDataset){dataset=this._calcDataset()}else{if(this.hardMute&&this._doesObjHaveValues(this.mutedSeries)){for(var newRawData=[],i=0;i<this.crosshairData.rawData.length;i++){if(!this.mutedSeries[this.crosshairData.rawData[i][this.timeData]]){newRawData.push(this.crosshairData.rawData[i])}}dataset=newRawData}else{dataset=this.crosshairData.rawData}}if(this.showTooltipData){this._setTooltipDataMultiLine(dataset)}this.set("_highlightData",dataset);this.fire("px-vis-highlight-data-changed")}.bind(this),5)},_setTooltipDataMultiLine:function _setTooltipDataMultiLine(dataset){if(!this.canvasContext&&this._isD3Empty(this.svg)){return}var d;if(dataset.length&&dataset[0]){d=this._createMultilineTooltipData(dataset[0],!1);this.set("defaultEmptyData",d);this.dispatchEvent(new CustomEvent("px-vis-axis-interaction-space-tooltip-data",{bubbles:!0,composed:!0,detail:this.defaultEmptyData}))}else{d=this._resetMultilineTooltipData();this.set("defaultEmptyData",d);this.dispatchEvent(new CustomEvent("px-vis-axis-interaction-space-reset-tooltip",{bubbles:!0,composed:!0,detail:this.defaultEmptyData}))}},_resetMultilineTooltipData:function _resetMultilineTooltipData(){return{mouse:null,dataPos:[-1e3,-1e3],time:null,dataset:null,series:[],seriesObj:{},color:null,tooltipConfig:null}},_createMultilineTooltipData:function _createMultilineTooltipData(dataset,svg){var last=this.dimensions[this.dimensions.length-1],data,screenX,screenY,svgBounding,tooltipConfig={},value={},series=[],seriesObj={},max=-Number.MAX_VALUE,val,dim;if(this.radialLine){for(var i=0;i<this.dimensions.length;i++){dim=this.dimensions[i];val=this.y(dataset[dim])*Math.sin(this.x(dim));if(val>max){last=dim;max=val}}}for(var i=0,aid;i<this.dimensions.length;i++){aid=this.dimensions[i];value={};tooltipConfig[aid]={};if(this.categoryKey&&dataset[this.categoryKey]){tooltipConfig[aid].color=this.completeSeriesConfig[dataset[this.categoryKey]].color}else{tooltipConfig[aid].color=this.completeSeriesConfig[this.seriesId].color}tooltipConfig[aid].name=this.completeSeriesConfig[aid]&&this.completeSeriesConfig[aid].title?this.completeSeriesConfig[aid].title:aid;tooltipConfig[aid].yAxisUnit=this.completeSeriesConfig[aid]&&this.completeSeriesConfig[aid].yAxisUnit?this.completeSeriesConfig[aid].yAxisUnit:"";tooltipConfig[aid].y=aid;value[aid]=dataset[aid];series.push({name:aid,value:value});seriesObj[aid]={name:aid,value:value}}data={mouse:null,time:dataset[this.timeData],dataset:dataset,yVal:dataset[last],series:series,seriesObj:seriesObj,color:tooltipConfig[aid].color,tooltipConfig:tooltipConfig,axis:last};return data}},PxVisBehavior.observerCheck,PxVisBehavior.highlightShared,PxVisBehavior.margins];PxVisBehavior.preventWebWorkerSynchronization={properties:{preventWebWorkerSynchronization:{type:Boolean,value:!1}}};PxVisBehavior.wwDataSyncCounter={properties:{wwDataSyncCounter:{type:Number}}};PxVisBehavior.stripProperties={properties:{stripeConfig:{type:Object},stripeData:{type:Object,notify:!0,value:function value(){return{}}},stripeType:{type:String}}};PxVisBehavior.rendererType={properties:{rendererType:{type:String,value:"chartData"}}};PxVisBehavior.updateStylesOverride={properties:{_updateStyles:{type:Function},_stylesUpdated:{type:Number,value:0}},created:function created(){this._updateStyles=this.updateStyles;this.updateStyles=function(){this.debounce("styleupdate",function(){this._updateStyles();var t=this.drawDebounceTime;this.drawDebounceTime=0;this.set("_stylesUpdated",this._stylesUpdated+1);this.drawDebounceTime=t},50)}}};PxVisBehavior.timeDomain=[{properties:{timeDomain:{type:Object,value:function value(){return{}}},timeKey:{type:String}},observers:["_timeDomainChartData(chartData, timeKey)"],_timeDomainChartData:function _timeDomainChartData(){if(this.timeKey&&this.chartData&&this.chartData.length&&(!this._doesObjHaveValues(this.timeDomain)||!this.timeDomain.x||0===this.timeDomain.x.length)){var domain={};if(this.timeDomain&&this.timeDomain.y){domain.y=this.timeDomain.y}domain.x=[this.chartData[0][this.timeKey],this.chartData[this.chartData.length-1][this.timeKey]];this.set("timeDomain",domain)}}},PxVisBehavior.dataset,PxVisBehavior.commonMethods];PxVisBehavior.axesDomain={properties:{axesDomain:{type:Object,value:function value(){return{}}}}};PxVisBehavior.brushDomains={properties:{brushDomains:{type:Object,value:function value(){return{}}}}};PxVisBehavior.annotationData={properties:{annotationData:{type:Array,value:function value(){return[]}},showStrongIcon:{type:Boolean,value:!1}}};PxVisBehavior.titleTruncation={properties:{titleTruncation:{type:Boolean,value:!1}}};PxVisBehavior.scaleTypeCheck={_isTimeType:function _isTimeType(scale){return"time"===scale||"timeLocal"===scale},_isOrdinalType:function _isOrdinalType(scale){return"ordinal"===scale||"scaleBand"===scale}};PxVisBehavior.referenceCurveProps={properties:{referenceData:Array,referenceConfig:Object}};PxVisBehavior.showHideClasses={_show:function _show(){for(var i=0;i<arguments.length;i++){if(!arguments[i]){return"hide"}}return""},_hide:function _hide(){for(var i=0;i<arguments.length;i++){if(!arguments[i]){return""}}return"hide"}};PxVisBehavior.gradientColorsProperty={properties:{gradientColors:{type:Array}}};PxVisBehavior.gradientColorsFunction={properties:{gradientColorsMin:{type:Number,value:0},gradientColorsMax:{type:Number,value:1}},_computeGradientRange:function _computeGradientRange(timeDomain){if(timeDomain&&timeDomain.x&&0<timeDomain.x.length){this.set("gradientColorsMin",+timeDomain.x[0]);this.set("gradientColorsMax",+timeDomain.x[1])}},createGradientFunction:function createGradientFunction(colors){if(colors){if("string"===typeof colors){return function(){return colors}}else if(Array.isArray(colors)){var fn;if(2===colors.length){fn=Px.d3.interpolateRgb(colors[0],colors[1])}else{fn=Px.d3.interpolateRgbBasis(colors)}return function(val){return fn(this._normalizeValue(val))}.bind(this)}else if("function"===typeof colors){return function(val){return colors(this._normalizeValue(val))}.bind(this)}else{console.warn("Color gradient "+colors+" has an invalid type. Should be string, array or function")}}},_normalizeValue:function _normalizeValue(val){if(this.gradientColorsMin===this.gradientColorsMax){return 0}else{return(val-this.gradientColorsMin)/(this.gradientColorsMax-this.gradientColorsMin)}}};</script>
</head><body></body></html>