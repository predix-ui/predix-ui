<html><head><link rel="import" href="../polymer/polymer.html">

<script>(function(){Polymer({is:"px-context-browser-favorited-temp",properties:{favoritedBehaviorElement:HTMLElement,favorited:Array,opened:Boolean,favoritedOpened:Boolean,_itemsToRemove:{type:Array,value:function value(){return[]}},currentFavorited:{type:Array,value:function value(){return[]},notify:!0,readOnly:!0}},observers:["_handleOpenedChanged(opened, favoritedOpened)","_computeCurrentFavorited(favorited, _itemsToRemove, favorited.*)"],created:function created(){this._flushFavoritedChangesTask=null},ready:function ready(){this.currentFavorited=this._computeCurrentFavorited(this.favorited,this._itemsToRemove)},handleItemTapped:function handleItemTapped(item){if(!this.favoritedOpened){if(-1===this.currentFavorited.indexOf(item)){this.favoritedBehaviorElement.favorite(item)}else{this.favoritedBehaviorElement.defavorite(item)}}if(this.favoritedOpened){if(-1===this._itemsToRemove.indexOf(item)){this._itemsToRemove=this._itemsToRemove.concat([item])}else{this._itemsToRemove=this._itemsToRemove.filter(function(i){return i!==item})}}},flushFavoritedChanges:function flushFavoritedChanges(){var _this=this;this._itemsToRemove.forEach(function(item){_this.favoritedBehaviorElement.defavorite(item)});this._itemsToRemove=[]},_computeCurrentFavorited:function _computeCurrentFavorited(favorited,itemsToRemove){var _this2=this;this.debounce("compute-current-favorited",function(){if(Array.isArray(favorited)&&Array.isArray(itemsToRemove)){_this2._setCurrentFavorited(favorited.filter(function(fav){return-1===itemsToRemove.indexOf(fav)}))}})},_handleOpenedChanged:function _handleOpenedChanged(opened,favoritedOpened){if(this._flushFavoritedChangesTask){this.cancelAsync(this._flushFavoritedChangesTask);this._flushFavoritedChangesTask=null}if(opened){this.flushFavoritedChanges()}if(!opened&&!favoritedOpened){this._flushFavoritedChangesTask=this.async(this.flushFavoritedChanges.bind(this),5e3)}}})})();</script>
</head><body></body></html>