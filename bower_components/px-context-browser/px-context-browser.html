<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../web-animations-js/web-animations-next-lite.min.html">
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../iron-dropdown/iron-dropdown.html">
<link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-graph.html">
<link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-selectable.html">
<link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-activatable.html">
<link rel="import" href="../px-app-helpers/px-app-asset/px-app-asset-behavior-favoritable.html">
<link rel="import" href="../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../px-icon-set/px-icon-set-navigation.html">
<link rel="import" href="../px-icon-set/px-icon.html">
<link rel="import" href="css/px-context-browser-styles.html">
<link rel="import" href="css/px-context-browser-animations-styles.html">
<link rel="import" href="px-context-browser-panel.html">
<link rel="import" href="px-context-browser-header.html">
<link rel="import" href="px-context-browser-item.html">
<link rel="import" href="px-context-browser-columns.html">
<link rel="import" href="px-context-browser-filter.html">
<link rel="import" href="px-context-browser-contextual-notification.html">
<link rel="import" href="px-context-browser-favorited-temp.html">

<!--
### Usage

    <px-context-browser-trigger trigger={{openTrigger}}></px-context-browser-trigger>
    <px-context-browser open-trigger="[[openTrigger]]" items='[{"label":"Home","id":"home"},{"label":"Alerts","id":"alerts"},{"label":"Assets","id":"assets"}]'></px-context-browser>

### Styling
The following custom properties are available for styling.

Custom property | Description
:----------------|:-------------
`--px-context-browser-header-background-color` | Background color of the header
`--px-context-browser-header-border-color` | Bottom border color of the header
`--px-context-browser-header-text-color` | Text color of the header
`--px-context-browser-item-text-color` | Text color of the items
`--px-context-browser-item-background-color--hover` | Background color of the items on hover
`--px-context-browser-item-background-color--selected` | Background color of the item when selected
`--px-context-browser-item-text-color--selected` | Text color of the item when selected
`--px-context-browser-icon-stroke` | Color of the icon stroke
`--px-context-browser-icon-stroke--item-selected` | Color of the icon when the item is selected
`--px-context-browser-panel-border-color` | Border color of the panel
`--px-context-browser-panel-background-color` | Background color of the panel
`--px-context-browser-panel-width` | Width of the panel
`--px-context-browser-loading-background-color` | The background color of the loading bar
`--px-context-browser-loading-foreground-color` | The foreground color of the loading bar
`--px-context-browser-trigger-height` | The height of the trigger
`--px-context-browser-trigger-width` | The width of the trigger
`--px-context-browser-trigger-hover-background` | The background color of the trigger on hover
`--px-context-browser-trigger-icon-color` | The icon color of the trigger

@element px-context-browser
@homepage index.html
@demo index.html
-->
</head><body><dom-module id="px-context-browser">
  <template>
    <style include="px-context-browser-styles"></style>
    <style include="px-context-browser-animations-styles"></style>

    <!-- <iron-a11y-keys target="[[_panelEl]]" keys="up" on-keys-pressed="_focusLast" stop-keyboard-event-propagation></iron-a11y-keys>
    <iron-a11y-keys target="[[_panelEl]]" keys="down" on-keys-pressed="_focusNext" stop-keyboard-event-propagation></iron-a11y-keys>
    <iron-a11y-keys target="[[_panelEl]]" keys="enter" on-keys-pressed="_handleEnterKey" stop-keyboard-event-propagation></iron-a11y-keys>
    <iron-a11y-keys target="[[_panelEl]]" keys="left" on-keys-pressed="_handleArrowLeftKey" stop-keyboard-event-propagation></iron-a11y-keys> -->

    <!-- Media query to determine if context browser should collapse -->
    <template is="dom-if" if="[[_collapseQueryIsValid(collapseAt)]]">
      <iron-media-query query$="(max-width: {{_getCollapseQuery(collapseAt)}})" query-matches="{{_belowCollapseSize}}"></iron-media-query>
    </template>

    <!-- Links the active column to __activeContext so changes to the active column are notifying -->
    <array-selector id="selector" items="[[__context.columns]]" selected="{{__activeContext}}"></array-selector>

    <!-- Creates a temporary cache of favorited items before applying changes to the favorited array -->
    <px-context-browser-favorited-temp id="favoritedCop" favorited-behavior-element="[[__this]]" favorited="[[favorited]]" current-favorited="{{currentFavorited}}" opened="[[opened]]" favorited-opened="[[favoritedOpened]]">
    </px-context-browser-favorited-temp>

    <!-- Backdrop to show if collapsed and open -->
    <div class="backdrop" visible$="[[_isCollapseOpened(collapsed, opened, favoritedOpened)]]"></div>

    <!-- REGULAR CONTEXT BROWSER -->
    <iron-dropdown id="dropdown" no-overlap="" horizontal-offset="-15" vertical-align="[[_getDropdownVerticalAlign(collapsed)]]" horizontal-align="[[_getDropdownHorizontalAlign(collapsed)]]" opened="{{opened}}" position-target="[[_getPositionTarget(_positionTarget, collapsed)]]" on-iron-overlay-canceled="_handleBrowserCanceled" on-iron-overlay-opened="_handleBrowserOpened" on-iron-overlay-closed="_handleBrowserClosed">
      <px-context-browser-panel id="panel" slot="dropdown-content" has-header$="[[_isNotNull(active)]]" collapsed$="[[collapsed]]" show-loading-bar="[[loading]]">
        <px-context-browser-header id="header" slot="header" active$="[[_isNotNull(active)]]" label="[[_getItemProp(active, keys.label)]]" on-tap="_handleHeaderTapped" can-select="[[_isItemSelectable(active)]]" can-favorite="[[_showFavoritedAndItemFavoritable(showFavorited, active)]]" favorited="[[_isItemFavorited(active, favorited, favorited.*)]]" collapsed$="[[collapsed]]"></px-context-browser-header>
        <px-context-browser-filter slot="filter" active$="[[showFilter]]" filter="{{filter}}" filtering="{{filtering}}" placeholder="[[localize('Filter')]]"></px-context-browser-filter>
        <px-context-browser-columns slot="columns" active="[[__context.activeIndex]]" visible-count$="[[__activeContext.visibleCount]]" collapsed$="[[collapsed]]">
          <template is="dom-repeat" items="[[__context.columns]]" as="column">
            <div column$="[[column.index]]" class="column" slot="columns">
              <template is="dom-repeat" items="[[column.items]]" as="item" forcolumn="[[column.index]]" on-dom-change="_updateVisibleCount" filter="{{_getColumnFilter(column.index, filter, keys.label, filtering)}}">
                <px-context-browser-item label="[[_getItemProp(item, keys.label)]]" breadcrumbs="[[_getFavoritedItemPath(item)]]" selected="[[_isItemSelected(item, selected)]]" favorited="[[_isItemFavorited(item, favorited, favorited.*)]]" can-select="[[_isItemSelectable(item)]]" can-favorite="[[_showFavoritedAndItemFavoritable(showFavorited, item)]]" can-open="[[_isItemOpenable(showArrow, item)]]" on-tap="_handleItemTapped" tabindex="0" collapsed$="[[collapsed]]">
                </px-context-browser-item>
              </template>
            </div>
          </template>
        </px-context-browser-columns>
      </px-context-browser-panel>
    </iron-dropdown>

    <!-- FAVORITES CONTEXT BROWSER-->
    <iron-dropdown id="favoritedDropdown" no-overlap="" horizontal-offset="-15" vertical-align="[[_getDropdownVerticalAlign(collapsed)]]" horizontal-align="[[_getDropdownHorizontalAlign(collapsed)]]" opened="{{favoritedOpened}}" position-target="[[_getPositionTarget(_favoritedPositionTarget, collapsed)]]" on-iron-overlay-canceled="_handleFavoritedBrowserCanceled">
      <!-- NON-EMPTY FAVORITES STATE -->
      <px-context-browser-panel id="favoritedPanel" slot="dropdown-content" collapsed$="[[collapsed]]" show-loading-bar="[[favoritedSyncing]]">
        <template is="dom-if" if="[[!_showFavoritedEmptyState(favorited, favorited.*)]]">
          <px-context-browser-filter slot="filter" active$="[[showFilter]]" filter="{{favoritedFilter}}" filtering="{{filtering}}" placeholder="[[localize('Filter')]]"></px-context-browser-filter>
          <px-context-browser-contextual-notification slot="contextual-notification" opened="[[favoritedSyncFailed]]"></px-context-browser-contextual-notification>
          <px-context-browser-columns slot="columns" active="0" visible-count$="[[_favoritedVisibleCount]]" collapsed$="[[collapsed]]">
            <div column="0" class="column" slot="columns">
              <template is="dom-repeat" id="favoritedRepeater" items="[[favorited]]" as="item" forcolumn="0" on-dom-change="_updateVisibleCountFavorited" filter="{{_getColumnFilterFavorited(favoritedFilter, keys.label, filtering)}}">
                <px-context-browser-item label="[[_getItemProp(item, keys.label)]]" breadcrumbs="[[_getFavoritedItemPath(item)]]" selected="[[_isItemSelected(item, selected)]]" favorited="[[_isItemFavorited(item, currentFavorited)]]" can-select="[[_isItemSelectable(item)]]" can-favorite="[[_showFavoritedAndItemFavoritable(showFavorited, item)]]" can-open="[[_isItemOpenable(showArrow, item)]]" on-tap="_handleItemTapped" tabindex="0" collapsed$="[[collapsed]]" style-as-favorite="" visible="[[favoritedOpened]]">
                </px-context-browser-item>
              </template>
            </div>
          </px-context-browser-columns>
        </template>

        <!-- EMPTY FAVORITES STATE -->
        <template is="dom-if" if="[[_showFavoritedEmptyState(favorited, favorited.*)]]">
          <px-context-browser-contextual-notification slot="contextual-notification" opened="[[favoritedSyncFailed]]"></px-context-browser-contextual-notification>
          <div slot="columns" class="context-browser-favorites--empty__container">
            <px-icon icon="px-nav:favorite" class="context-browser-favorites--empty__icon"></px-icon>
            <div class="context-browser-favorites--empty__text regular">[[localize("You don't have any favorites yet.")]]</div>
            <div class="context-browser-favorites--empty__subtext zeta">[[localize("To favorite a context\, click on the star while viewing a context in the context browser.")]]</div>
          </div>
        </template>
      </px-context-browser-panel>
    </iron-dropdown>

  </template>
</dom-module>
<script>(function(){Polymer({is:"px-context-browser",behaviors:[PxAppBehavior.AssetGraph,PxAppBehavior.AssetSelectable,PxAppBehavior.AssetActivatable,PxAppBehavior.AssetFavoritable,Polymer.IronResizableBehavior,Polymer.AppLocalizeBehavior],properties:{showFavorited:{type:Boolean,value:!1,reflectToAttribute:!0},showArrow:{type:Boolean,value:!1},showFilter:{type:Boolean,value:!1},filter:{type:String,notify:!0},favoritedFilter:{type:String,notify:!0},loadingTimeout:{type:Number,value:5e3,observer:"_handleLoadingTimeoutChanged"},loading:{type:Boolean,value:!1,readOnly:!0},openTrigger:{type:HTMLElement,observer:"_openTriggerChanged"},favoritedTrigger:{type:HTMLElement,observer:"_favoritedTriggerChanged"},opened:{type:Boolean,notify:!0,observer:"_handleInitialOpenedValue"},favoritedOpened:{type:Boolean,notify:!0,reflectToAttribute:!0},keepOpen:{type:Boolean},collapseAt:{type:Number},collapsed:{type:Boolean,value:!1,reflectToAttribute:!0},favoritedSyncFailed:{type:Boolean,value:!1,notify:!0},favoritedSyncing:{type:Boolean,value:!1},language:{type:String,value:"en"},useKeyIfMissing:{type:Boolean,value:!0},resources:{type:Object,value:function value(){return{en:{"You don't have any favorites yet.":"You don't have any favorites yet.","To favorite a context, click on the star while viewing a context in the context browser.":"To favorite a context, click on the star while viewing a context in the context browser.",Filter:"Filter"}}}},_positionTarget:{type:HTMLElement},_panelEl:{type:HTMLElement},__rootColumn:{type:Object,computed:"_getRootColumn(__rootItems)"},__context:{type:Array,value:function value(){return{columns:null,activeIndex:null}},computed:"_getColumns(activeMeta, __rootColumn)"},__activeContext:{type:Object},_belowCollapseSize:{type:Boolean,observer:"_handleBelowCollapseSizeChanged"},_cancelFilterFocus:{type:Boolean,value:!1},_favoritedVisibleCount:{type:Number},__this:HTMLElement},observers:["clearFilter(__context.activeIndex)","clearFilter(showFilter)","_linkActiveContext(__context.activeIndex)","_updateActiveLoading(activeMeta.item)","_updateCancelFilterFocus(__context.activeIndex)"],listeners:{"px-app-asset-children-updated":"_handleChildrenChanged","iron-resize":"_handleResize","px-context-browser-filter-focused":"_handleFilterFocused"},_handleFilterFocused:function _handleFilterFocused(evt){if(this._cancelFilterFocus){var target=Polymer.dom(evt).rootTarget;target.blurFilter()}},_updateCancelFilterFocus:function _updateCancelFilterFocus(index){if(!this.showFilter||!this.opened||!this.collapsed||0!==index)return;console.log("start cancel");this._cancelFilterFocus=!0;if(this._cancelFilterFocusTask){this.cancelAsync(this._cancelFilterFocusTask);this._cancelFilterFocusTask=null}this._cancelFilterFocusTask=this.async(function(){console.log("stop cancel");this._cancelFilterFocus=!1;this._cancelFilterFocusTask=null},200)},_collapseQueryIsValid:function _collapseQueryIsValid(query){if("number"===typeof query){return!0}if("string"===typeof query&&"px"===query.slice(-2)&&!isNaN(parseInt(query))){return!0}return!1},_isCollapseOpened:function _isCollapseOpened(collapsed,opened,favoritedOpened){return collapsed&&(opened||favoritedOpened)},_handleResize:function _handleResize(evt){if(this._positionTarget&&evt&&Polymer.dom(evt).rootTarget===this){window.requestAnimationFrame(function(){setTimeout(function(){this.$.dropdown.refit()}.bind(this))}.bind(this))}},created:function created(){this._resetActiveTask=null;this._squashNextResetActiveTask=null;this._childLoadingHandler=null;this._cancelFilterFocusTask=null},ready:function ready(){this._favoritedCop=this.$.favoritedCop;this.__this=this},attached:function attached(){this._panelElement=Polymer.dom(this.root).querySelector("#panel")},detached:function detached(){this._panelElement=null},_getCollapseQuery:function _getCollapseQuery(collapseAt){if("number"===typeof collapseAt){return collapseAt+"px"}if("string"===typeof collapseAt&&"px"===collapseAt.slice(-2)||!isNaN(parseInt(collapseAt))){return collapseAt}},_handleBelowCollapseSizeChanged:function _handleBelowCollapseSizeChanged(newVal,oldVal){if(newVal&&!this.collapsed){this.collapsed=!0}if(!newVal&&this.collapsed){this.collapsed=!1}},_setLoadingStatus:function _setLoadingStatus(index,isLoading){this.set("__context.columns.".concat(index,".loading"),isLoading)},_updateActiveLoading:function _updateActiveLoading(newActive){if(this.loading){this.cancelLoading(!1)}if(newActive){var shouldLoadChildren=!this._assetGraph.isTerminal(newActive)&&!this._assetGraph.hasChildren(newActive);if(shouldLoadChildren){this._startLoading(newActive,this._assetGraph.getPath(newActive))}}},_handleLoadingTimeout:function _handleLoadingTimeout(item){this.cancelLoading(!0)},_handleChildrenChanged:function _handleChildrenChanged(evt){var _evt$detail=evt.detail,item=_evt$detail.item,path=_evt$detail.path,children=_evt$detail.children,isTerminal=_evt$detail.isTerminal,hasChildren=_evt$detail.hasChildren;if(this.activeMeta&&this.activeMeta.item&&this.activeMeta.item===item){var _path="__context.columns.".concat(this.__context.activeIndex,".items");this.set(_path,[]);this.set(_path,children);this.cancelLoading(!0)}else if(this.__context&&Array.isArray(this.__context.columns)&&null===item){var _path2="__context.columns.0.items";this.set(_path2,[]);this.set(_path2,children)}else if(this.__context&&Array.isArray(this.__context.columns)&&1<this.__context.columns.length){for(var i=1;i<this.__context.columns.length;i++){if(this.__context.columns[i].parent===item){var _path3="__context.columns.".concat(i,".items");this.set(_path3,[]);this.set(_path3,children)}}}},_startLoading:function _startLoading(item,path){if("number"!==typeof this.loadingTimeout||0>this.loadingTimeout){throw new Error("px-context-browser expects the `loadingTimeout` property to be a non-negative number. The following invalid value was given:\n          ".concat(this.loadingTimeout))}this._setLoading(!0);this.fire("px-app-asset-children-requested",{item:item,path:path});if("number"===typeof this.loadingTimeout&&0<this.loadingTimeout){this._childLoadingHandler=this.async(this._handleLoadingTimeout.bind(this,item),this.loadingTimeout)}},cancelLoading:function cancelLoading(allowBounceback){if(this._childLoadingHandler){this.cancelAsync(this._childLoadingHandler);this._childLoadingHandler=null}if(this.loading){this._setLoading(!1)}if(allowBounceback){if(this.activeMeta&&this.activeMeta.item&&!this._assetGraph.hasChildren(this.activeMeta.item)){this.activate(this.activeMeta.parent,"LOADING_CANCELLED")}}},_handleLoadingTimeoutChanged:function _handleLoadingTimeoutChanged(newVal){if(this.loading){this.cancelLoading()}},clearFilter:function clearFilter(){this.filter=""},_getColumnFilter:function _getColumnFilter(index,filter,labelKey,filterIsActive){if(!filterIsActive||this.__context.activeIndex!==index){return null}var filterStr=filter.toLowerCase();return this._doesItemMatchFilter.bind(this,filterStr,labelKey)},_getColumnFilterFavorited:function _getColumnFilterFavorited(filter,labelKey,filterIsActive){if(!filterIsActive){return null}var filterStr=filter.toLowerCase();return this._doesItemMatchFilter.bind(this,filterStr,labelKey)},_doesItemMatchFilter:function _doesItemMatchFilter(filter,labelKey,item){if(!item[labelKey])return!1;return-1<item[labelKey].toLowerCase().indexOf(filter)},_linkActiveContext:function _linkActiveContext(index){if(this.__context.columns&&"number"===typeof index){this.$.selector.select(this.__context.columns[index])}},_updateVisibleCount:function _updateVisibleCount(evt){if(!this.__context||"number"!==typeof this.__context.activeIndex)return;var target=Polymer.dom(evt).rootTarget,index=target.forcolumn,count=target.renderedItemCount;if("number"!==typeof count)return;this.set("__context.columns.".concat(index,".visibleCount"),count)},_updateVisibleCountFavorited:function _updateVisibleCountFavorited(){if(this.favoritedOpened){var target=Polymer.dom(this.root).querySelector("#favoritedRepeater");if(!target)return;var count=target.renderedItemCount;if("number"!==typeof count)return;this._favoritedVisibleCount=count}},_getColumns:function _getColumns(active,rootColumn){var item=active.item,path=active.path;if(!Array.isArray(this.__context.columns)){this.__context.columns=[rootColumn]}if(!Array.isArray(path)&&Array.isArray(this.__context.columns)&&this.__context.columns[0]!==rootColumn){this.__context.columns=[rootColumn]}if(!Array.isArray(path)){return Object.assign({},this.__context,{activeIndex:0})}for(var columns=this.__context.columns.slice(0),activeIndex,i=0;i<path.length;i++){if(columns[i+1]&&columns[i+1].parent===item){activeIndex=i+1;break}columns[i+1]=Object.assign({},columns[i+1]?columns[i+1]:{},{index:i+1,parent:path[i],items:this._assetGraph.hasChildren(path[i])?this._assetGraph.getChildren(path[i]):[],visibleCount:null})}return Object.assign({},this.__context,{columns:columns,activeIndex:"number"===typeof activeIndex?activeIndex:path.length})},_getRootColumn:function _getRootColumn(items){return{index:0,parent:null,items:items,visibleCount:null}},_openTriggerChanged:function _openTriggerChanged(newTrigger,oldTrigger){var _this=this;if(oldTrigger&&babelHelpers.instanceof(oldTrigger,HTMLElement)&&this._openTriggerTapped){oldTrigger.removeEventListener("trigger-tapped",this._openTriggerTapped)}if(newTrigger&&babelHelpers.instanceof(newTrigger,HTMLElement)){this._positionTarget=newTrigger;this._openTriggerTapped=function(){_this._handleOpenTriggerTapped()};newTrigger.addEventListener("trigger-tapped",this._openTriggerTapped,!1)}},_favoritedTriggerChanged:function _favoritedTriggerChanged(newTrigger,oldTrigger){var _this2=this;if(oldTrigger&&babelHelpers.instanceof(oldTrigger,HTMLElement)&&this._favoritedTriggerTapped){oldTrigger.removeEventListener("trigger-tapped",this._favoritedTriggerTapped)}if(newTrigger&&babelHelpers.instanceof(newTrigger,HTMLElement)){this._favoritedPositionTarget=newTrigger;this._favoritedTriggerTapped=function(){_this2._handleFavoritedTriggerTapped()};newTrigger.addEventListener("trigger-tapped",this._favoritedTriggerTapped,!1)}},_handleOpenTriggerTapped:function _handleOpenTriggerTapped(evt){if(!this.opened){this.favoritedOpened=!1;this.opened=!0}else{this.$.dropdown.close()}},_handleFavoritedTriggerTapped:function _handleFavoritedTriggerTapped(evt){var _this3=this;if(!this.favoritedOpened){this.opened=!1;this.favoritedOpened=!0;if(Polymer.Element){Polymer.RenderStatus.afterNextRender(this,function(){_this3._updateVisibleCountFavorited()})}else{requestAnimationFrame(function(){setTimeout(function(){_this3._updateVisibleCountFavorited()})})}}else{this.$.favoritedDropdown.close()}},_handleBrowserCanceled:function _handleBrowserCanceled(evt){if(!this.openTrigger)return;var path=Polymer.dom(evt.detail).path;if(-1<path.indexOf(this.openTrigger)){evt.preventDefault()}},_handleFavoritedBrowserCanceled:function _handleFavoritedBrowserCanceled(evt){if(!this.favoritedTrigger)return;var path=Polymer.dom(evt.detail).path;if(-1<path.indexOf(this.favoritedTrigger)){evt.preventDefault()}},_handleBrowserOpened:function _handleBrowserOpened(evt){if(this._squashNextResetActiveTask){this._squashNextResetActiveTask=null}if(this._resetActiveTask){this.cancelAsync(this._resetActiveTask);this._resetActiveTask=null}else{this._resetActive()}},_handleBrowserClosed:function _handleBrowserClosed(evt){if(this._squashNextResetActiveTask){this._squashNextResetActiveTask=null;return}if(this._resetActiveTask){this.cancelAsync(this._resetActiveTask);this._resetActiveTask=null}this._resetActiveTask=this.async(this._resetActive.bind(this),5e3)},_resetActive:function _resetActive(){if(!this.selected&&this.active){this.activate(null,"DOM_EVENT")}else if(this.selected&&this.active!==this.selectedMeta.parent){this.activate(this.selectedMeta.parent,"DOM_EVENT")}},_handleInitialOpenedValue:function _handleInitialOpenedValue(nextVal,lastVal){if("boolean"===typeof nextVal&&"undefined"==typeof lastVal){this._squashNextResetActiveTask=!0}},_getDropdownVerticalAlign:function _getDropdownVerticalAlign(collapsed){return collapsed?"bottom":"top"},_getDropdownHorizontalAlign:function _getDropdownHorizontalAlign(collapsed){return collapsed?"right":"left"},_getPositionTarget:function _getPositionTarget(openTarget,collapsed){if(collapsed||!babelHelpers.instanceof(openTarget,HTMLElement)){return window}return openTarget},_handleItemTapped:function _handleItemTapped(evt){evt.stopPropagation();var path=Polymer.dom(evt).path,action=this._findActionInPath(path),item=evt.model.item;if("string"===typeof action&&0<action.length&&"object"===babelHelpers.typeof(item)){var isTerminal=this._assetGraph.isTerminal(item);if(!isTerminal&&"activate"===action){this.activate(item,"DOM_EVENT")}else if("select"===action||isTerminal&&"activate"===action){this.select(item,"DOM_EVENT");if(!this.keepOpen){this.$.dropdown.close()}}else if("favorite"===action){this._favoritedCop.handleItemTapped(item)}}},_getFavoritedItemPath:function _getFavoritedItemPath(item){if(item&&"object"===babelHelpers.typeof(item)){var path=this._assetGraph.getPath(item),pathArray=[];path.forEach(function(element){pathArray.push(element.label)});return pathArray.slice(0,-1)}return null},_handleHeaderTapped:function _handleHeaderTapped(evt){var path=Polymer.dom(evt).path,action=this._findActionInPath(path);if("string"!==typeof action||0<action.length){switch(action){case"back":this.activate(this.activeMeta.parent,"DOM_EVENT");break;case"select":this.select(this.active,"DOM_EVENT");if(!this.keepOpen){this.$.dropdown.close()}break;case"favorite":if(Array.isArray(this.favorited)&&-1===this.favorited.indexOf(this.active)){this.favorite(this.active,"DOM_EVENT")}else{this.defavorite(this.active,"DOM_EVENT")}break;}}},_findActionInPath:function _findActionInPath(path){for(var action,i=0;i<path.length;i++){if(babelHelpers.instanceof(path[i],Node)&&path[i].hasAttribute&&path[i].hasAttribute("asset-action")){action=path[i].getAttribute("asset-action");break}}return action},_isItemSelected:function _isItemSelected(item,selected){return"object"===babelHelpers.typeof(selected)&&selected===item},_isItemFavorited:function _isItemFavorited(item,favorited){return"object"===babelHelpers.typeof(favorited)&&Array.isArray(favorited)&&-1<favorited.indexOf(item)},_isItemVisible:function _isItemVisible(item){return!0===item.visible},_isItemOpenable:function _isItemOpenable(canOpen,item){return canOpen&&!this._assetGraph.isTerminal(item)},_isItemSelectable:function _isItemSelectable(item){return item&&this._assetGraph.isSelectable(item)},_isItemFavoritable:function _isItemFavoritable(item){return item&&this._assetGraph.isSelectable(item)},_isNotNull:function _isNotNull(val){return"undefined"!==typeof val&&null!==val},_showFavoritedAndItemFavoritable:function _showFavoritedAndItemFavoritable(showFavorited,item){return showFavorited&&this._isItemFavoritable(item)},_showFavoritedEmptyState:function _showFavoritedEmptyState(favorited){return!favorited||!Array.isArray(favorited)||0===favorited.length},_getItemProp:function _getItemProp(item,key){if(item&&"object"===babelHelpers.typeof(item)&&"string"===typeof key&&item.hasOwnProperty(key)){return item[key]}return null}});if("function"!=typeof Object.assign){Object.assign=function(target,varArgs){"use strict";if(null==target){throw new TypeError("Cannot convert undefined or null to object")}for(var to=Object(target),index=1,nextSource;index<arguments.length;index++){nextSource=arguments[index];if(null!=nextSource){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to}}})();</script>
</body></html>