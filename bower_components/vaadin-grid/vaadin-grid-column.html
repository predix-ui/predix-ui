<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
--><html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="vaadin-grid-templatizer.html">

<script>window.Vaadin=window.Vaadin||{};window.Vaadin.Grid=window.Vaadin.Grid||{};Vaadin.Grid.ColumnBaseMixin=function(superClass){return function(_superClass){babelHelpers.inherits(ColumnBaseMixin,_superClass);babelHelpers.createClass(ColumnBaseMixin,[{key:"connectedCallback",value:function connectedCallback(){var _this2=this;babelHelpers.get(babelHelpers.getPrototypeOf(ColumnBaseMixin.prototype),"connectedCallback",this).call(this);this.template&&(this.template.templatizer._grid=this._grid);this.headerTemplate&&(this.headerTemplate.templatizer._grid=this._grid);this.footerTemplate&&(this.footerTemplate.templatizer._grid=this._grid);this._templateObserver.flush();if(!this.template){this._templateObserver.callback()}requestAnimationFrame(function(){_this2._allCells.forEach(function(cell){if(!cell._content.parentNode){_this2._grid&&_this2._grid.appendChild(cell._content)}})})}},{key:"disconnectedCallback",value:function disconnectedCallback(){var _this3=this;babelHelpers.get(babelHelpers.getPrototypeOf(ColumnBaseMixin.prototype),"disconnectedCallback",this).call(this);requestAnimationFrame(function(){if(!_this3._findHostGrid()){_this3._allCells.forEach(function(cell){if(cell._content.parentNode){cell._content.parentNode.removeChild(cell._content)}})}});this._gridValue=void 0}},{key:"_findHostGrid",value:function _findHostGrid(){var el=this;while(el&&"vaadin-grid"!==el.localName){el=el.assignedSlot?el.assignedSlot.parentNode:el.parentNode}return el||void 0}},{key:"_grid",get:function get(){if(!this._gridValue){this._gridValue=this._findHostGrid()}return this._gridValue}},{key:"_allCells",get:function get(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter(function(cell){return cell})}}],[{key:"properties",get:function get(){return{resizable:{type:Boolean,value:function value(){if("vaadin-grid-column-group"===this.localName){return}var parent=this.parentNode;if(parent&&"vaadin-grid-column-group"===parent.localName){return parent.resizable||!1}else{return!1}}},headerTemplate:{type:Object},footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object}}},{key:"observers",get:function get(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_stampBodyTemplate(template, _cells.*)","_stampHeaderTemplate(headerTemplate, _headerCell)","_stampFooterTemplate(footerTemplate, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}}]);function ColumnBaseMixin(){var _this;babelHelpers.classCallCheck(this,ColumnBaseMixin);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ColumnBaseMixin).call(this));_this._templateObserver=new Polymer.FlattenedNodesObserver(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(_this)),function(info){_this.headerTemplate=_this._prepareHeaderTemplate();_this.footerTemplate=_this._prepareFooterTemplate();_this.template=_this._prepareBodyTemplate()});return _this}babelHelpers.createClass(ColumnBaseMixin,[{key:"_prepareHeaderTemplate",value:function _prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate("template.header")||null,{})}},{key:"_prepareFooterTemplate",value:function _prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate("template.footer")||null,{})}},{key:"_prepareBodyTemplate",value:function _prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate("template:not(.header):not(.footer)",{}))}},{key:"_prepareTemplatizer",value:function _prepareTemplatizer(template,instanceProps){if(template&&!template.templatizer){var templatizer=new Vaadin.Grid.Templatizer;templatizer._grid=this._grid;templatizer.dataHost=this.dataHost;templatizer._instanceProps=instanceProps||templatizer._instanceProps;templatizer.template=template;template.templatizer=templatizer}return template}},{key:"_stampBodyTemplate",value:function _stampBodyTemplate(template,cells){if(!template||!this._cells){return}this._cells.forEach(function(cell){if(cell._template!==template){cell._template=template;cell._content.innerHTML="";var inst=template.templatizer.createInstance();cell._content.appendChild(inst.root);cell._instance=inst;inst.index=cell.parentElement.index;inst.item=cell.parentElement._item}})}},{key:"_stampHeaderTemplate",value:function _stampHeaderTemplate(headerTemplate,headerCell){if(!headerTemplate||!headerCell||headerCell._instance){return}var inst=headerTemplate.templatizer.createInstance();headerCell._content.appendChild(inst.root);headerCell._instance=inst;headerCell.parentElement.hidden=!1}},{key:"_stampFooterTemplate",value:function _stampFooterTemplate(footerTemplate,footerCell){if(!footerTemplate||!footerCell||footerCell._instance){return}var inst=footerTemplate.templatizer.createInstance();footerCell._content.appendChild(inst.root);footerCell._instance=inst;footerCell.parentElement.hidden=!1}},{key:"_selectFirstTemplate",value:function _selectFirstTemplate(selector){var _this4=this;return Array.prototype.filter.call(Polymer.dom(this).querySelectorAll(selector),function(el){return Polymer.dom(el).parentNode===_this4})[0]}},{key:"_findTemplate",value:function _findTemplate(selector){var template=this._selectFirstTemplate(selector);if(template){if(this.dataHost){template._rootDataHost=this.dataHost._rootDataHost||this.dataHost}}return template}},{key:"_flexGrowChanged",value:function _flexGrowChanged(flexGrow,headerCell,footerCell,cells){if(this.parentElement&&this.parentElement._columnPropChanged){this.parentElement._columnPropChanged("flexGrow")}this._allCells.forEach(function(cell){return cell.style.flexGrow=flexGrow})}},{key:"_orderChanged",value:function _orderChanged(order,headerCell,footerCell,cells){this._allCells.forEach(function(cell){return cell.style.order=order})}},{key:"_widthChanged",value:function _widthChanged(width,headerCell,footerCell,cells){if(this.parentElement&&this.parentElement._columnPropChanged){this.parentElement._columnPropChanged("width")}this._allCells.forEach(function(cell){return cell.style.width=width})}},{key:"_frozenChanged",value:function _frozenChanged(frozen,headerCell,footerCell,cells){var _this5=this;if(this.parentElement&&this.parentElement._columnPropChanged){this.parentElement._columnPropChanged("frozen",frozen)}this._allCells.forEach(function(cell){return _this5._toggleAttribute("frozen",frozen,cell)});this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}},{key:"_lastFrozenChanged",value:function _lastFrozenChanged(lastFrozen){var _this6=this;this._allCells.forEach(function(cell){return _this6._toggleAttribute("last-frozen",lastFrozen,cell)});if(this.parentElement&&this.parentElement._columnPropChanged){this.parentElement._lastFrozen=lastFrozen}}},{key:"_toggleAttribute",value:function _toggleAttribute(name,on,element){if(on){element.setAttribute(name,"")}else{element.removeAttribute(name)}}},{key:"_reorderStatusChanged",value:function _reorderStatusChanged(reorderStatus,headerCell,footerCell,cells){this._allCells.forEach(function(cell){return cell.setAttribute("reorder-status",reorderStatus)})}},{key:"_resizableChanged",value:function _resizableChanged(resizable,headerCell){if(resizable===void 0||headerCell===void 0){return}if(headerCell){[headerCell].concat(this._emptyCells).forEach(function(cell){if(cell){var existingHandle=cell.querySelector("[part~=\"resize-handle\"]");if(existingHandle){cell.removeChild(existingHandle)}if(resizable){var handle=document.createElement("div");handle.setAttribute("part","resize-handle");cell.appendChild(handle)}}})}}},{key:"_hiddenChanged",value:function _hiddenChanged(hidden,headerCell,footerCell,cells){var _this7=this;if(this.parentElement&&this.parentElement._columnPropChanged){this.parentElement._columnPropChanged("hidden",hidden)}this._allCells.forEach(function(cell){return _this7._toggleAttribute("hidden",hidden,cell)});if(!!hidden!==!!this._previousHidden&&this._grid){this._grid._updateLastFrozen&&this._grid._updateLastFrozen();this._grid.notifyResize&&this._grid.notifyResize()}this._previousHidden=hidden}}]);return ColumnBaseMixin}(superClass)};</script>

</head><body><dom-module id="vaadin-grid-column">
  <script>{var GridColumnElement=function(_Vaadin$Grid$ColumnBa){babelHelpers.inherits(GridColumnElement,_Vaadin$Grid$ColumnBa);function GridColumnElement(){babelHelpers.classCallCheck(this,GridColumnElement);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GridColumnElement).apply(this,arguments))}babelHelpers.createClass(GridColumnElement,null,[{key:"is",get:function get(){return"vaadin-grid-column"}},{key:"properties",get:function get(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},template:{type:Object},_cells:Array}}}]);return GridColumnElement}(Vaadin.Grid.ColumnBaseMixin(Polymer.Element));customElements.define(GridColumnElement.is,GridColumnElement);window.Vaadin=window.Vaadin||{};Vaadin.GridColumnElement=GridColumnElement}</script>
</dom-module>
</body></html>