<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
--><html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html">
<link rel="import" href="vaadin-grid-scroller.html">
<link rel="import" href="vaadin-grid-data-provider-mixin.html">
<link rel="import" href="vaadin-grid-scroll-mixin.html">
<link rel="import" href="vaadin-grid-keyboard-navigation-mixin.html">
<link rel="import" href="vaadin-grid-combined-mixin.html">
<link rel="import" href="vaadin-grid-column-reordering-mixin.html">
<link rel="import" href="vaadin-grid-column-resizing-mixin.html">
<link rel="import" href="vaadin-grid-column.html">
<link rel="import" href="vaadin-grid-outer-scroller.html">
<link rel="import" href="vaadin-grid-styles.html">

</head><body><dom-module id="vaadin-grid">
  <template>
    <style include="vaadin-grid-styles"></style>

    <div id="scroller" no-scrollbars$="[[!_scrollbarWidth]]" wheel-scrolling$="[[_wheelScrolling]]" safari$="[[_safari]]" ios$="[[_ios]]" loading$="[[loading]]" edge$="[[_edge]]" firefox$="[[_firefox]]" ie$="[[_ie]]" column-reordering-allowed$="[[columnReorderingAllowed]]">
      <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
        <caption id="fixedsizer" class="sizer" part="row"></caption>
        <thead id="header" role="rowgroup"></thead>
        <tbody id="items" role="rowgroup"></tbody>
        <tfoot id="footer" role="rowgroup"></tfoot>
      </table>

      <div part="reorder-ghost"></div>
      <vaadin-grid-outer-scroller id="outerscroller" scroll-target="[[scrollTarget]]" scroll-handler="[[_this]]" no-scrollbars="[[!_scrollbarWidth]]">
        <div id="outersizer" class="sizer" part="row"></div>
      </vaadin-grid-outer-scroller>
    </div>

    <!-- The template needs at least one slot or else shady doesn't distribute -->
    <slot name="nodistribute"></slot>

    <div id="focusexit" tabindex="0"></div>
  </template>
</dom-module>

<script>{var GridElement=function(_Vaadin$ThemableMixin){babelHelpers.inherits(GridElement,_Vaadin$ThemableMixin);babelHelpers.createClass(GridElement,null,[{key:"is",get:function get(){return"vaadin-grid"}},{key:"version",get:function get(){return"4.1.8"}},{key:"observers",get:function get(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}},{key:"properties",get:function get(){return{_this:{type:Object,value:function value(){return this}},_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},_edge:{type:Boolean,value:"undefined"!==typeof CSS&&CSS.supports("(-ms-ime-align:auto)")},_ie:{type:Boolean,value:!!(navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/MSIE/))},_firefox:{type:Boolean,value:-1<navigator.userAgent.toLowerCase().indexOf("firefox")},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)}}}}]);function GridElement(){var _this;babelHelpers.classCallCheck(this,GridElement);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GridElement).call(this));_this.addEventListener("animationend",_this._onAnimationEnd);return _this}babelHelpers.createClass(GridElement,[{key:"_createScrollerRows",value:function _createScrollerRows(count){for(var _this2=this,rows=[],i=0,row;i<count;i++){row=document.createElement("tr");row.setAttribute("part","row");row.setAttribute("role","row");if(this._columnTree){this._updateRow(row,this._columnTree[this._columnTree.length-1],"body",!1,!0)}rows.push(row)}if(this._columnTree){this._columnTree[this._columnTree.length-1].forEach(function(c){return c.notifyPath("_cells.*",c._cells)})}Polymer.RenderStatus.beforeNextRender(this,function(){_this2._updateLastColumn();_this2._resetKeyboardNavigation()});return rows}},{key:"_getRowTarget",value:function _getRowTarget(){return this.$.items}},{key:"_createCell",value:function _createCell(tagName){var _this3=this,contentId=this._contentIndex=this._contentIndex+1||0,slotName="vaadin-grid-cell-content-"+contentId,cellContent=document.createElement("vaadin-grid-cell-content");cellContent.setAttribute("slot",slotName);var cell=document.createElement(tagName);cell.id=slotName.replace("-content-","-");cell.setAttribute("tabindex","-1");cell.setAttribute("role","td"===tagName?"gridcell":"columnheader");var slot=document.createElement("slot");slot.setAttribute("name",slotName);cell.appendChild(slot);cell._content=cellContent;cellContent.addEventListener("mousedown",function(){if(window.chrome){var mouseUpListener=function mouseUpListener(){if(!cellContent.contains(_this3.getRootNode().activeElement)){cell.focus()}document.removeEventListener("mouseup",mouseUpListener,!0)};document.addEventListener("mouseup",mouseUpListener,!0)}else{setTimeout(function(){if(!cellContent.contains(_this3.getRootNode().activeElement)){cell.focus()}})}});return cell}},{key:"_updateRow",value:function _updateRow(row,columns,section,isColumnRow,noNotify){var _this4=this;section=section||"body";var contentsFragment=document.createDocumentFragment();Array.from(row.children).forEach(function(cell){return cell._vacant=!0});row.innerHTML="";if("outersizer"!==row.id&&"fixedsizer"!==row.id){row.hidden=!0}columns.forEach(function(column,index){var cell;if("body"===section){column._cells=column._cells||[];cell=column._cells.filter(function(cell){return cell._vacant})[0];if(!cell){cell=_this4._createCell("td");column._cells.push(cell)}cell.setAttribute("part","cell body-cell");row.appendChild(cell);if(index===columns.length-1&&_this4._rowDetailsTemplate){_this4._detailsCells=_this4._detailsCells||[];var detailsCell=_this4._detailsCells.filter(function(cell){return cell._vacant})[0]||_this4._createCell("td");if(-1===_this4._detailsCells.indexOf(detailsCell)){_this4._detailsCells.push(detailsCell)}if(!detailsCell._content.parentElement){contentsFragment.appendChild(detailsCell._content)}_this4._configureDetailsCell(detailsCell);row.appendChild(detailsCell);_this4._a11ySetRowDetailsCell(row,detailsCell);detailsCell._vacant=!1}if(column.notifyPath&&!noNotify){column.notifyPath("_cells.*",column._cells)}}else{var tagName="header"===section?"th":"td";if(isColumnRow||"vaadin-grid-column-group"===column.localName){cell=column["_".concat(section,"Cell")]||_this4._createCell(tagName);row.appendChild(cell);if(cell._instance){row.hidden=!1}column["_".concat(section,"Cell")]=cell}else{column._emptyCells=column._emptyCells||[];cell=column._emptyCells.filter(function(cell){return cell._vacant})[0]||_this4._createCell(tagName);row.appendChild(cell);if(-1===column._emptyCells.indexOf(cell)){column._emptyCells.push(cell)}}cell.setAttribute("part","cell ".concat(section,"-cell"))}if(!cell._content.parentElement){contentsFragment.appendChild(cell._content)}cell._vacant=!1;cell._column=column});this.appendChild(contentsFragment);this._frozenCellsChanged();this._updateLastColumn()}},{key:"_updateScrollerItem",value:function _updateScrollerItem(row,index){this._preventScrollerRotatingCellFocus(row,index);if(!this._columnTree){return}this._toggleAttribute("odd",index%2,row);this._a11yUpdateRowRowindex(row,index);this._getItem(index,row)}},{key:"_columnTreeChanged",value:function _columnTreeChanged(columnTree,splices){var _this5=this;Array.from(this.$.items.children).forEach(function(row){return _this5._updateRow(row,columnTree[columnTree.length-1])});while(this.$.header.children.length<columnTree.length){var headerRow=document.createElement("tr");headerRow.setAttribute("part","row");headerRow.setAttribute("role","row");this.$.header.appendChild(headerRow);var footerRow=document.createElement("tr");footerRow.setAttribute("part","row");footerRow.setAttribute("role","row");this.$.footer.appendChild(footerRow)}while(this.$.header.children.length>columnTree.length){this.$.header.removeChild(this.$.header.firstElementChild);this.$.footer.removeChild(this.$.footer.firstElementChild)}Array.from(this.$.header.children).forEach(function(headerRow,index){return _this5._updateRow(headerRow,columnTree[index],"header",index===columnTree.length-1)});Array.from(this.$.footer.children).forEach(function(footerRow,index){return _this5._updateRow(footerRow,columnTree[columnTree.length-1-index],"footer",0===index)});this._updateRow(this.$.outersizer,columnTree[columnTree.length-1]);this._updateRow(this.$.fixedsizer,columnTree[columnTree.length-1]);this._resizeHandler();this._frozenCellsChanged();this._updateLastColumn();this._resetKeyboardNavigation();this._a11yUpdateHeaderRows();this._a11yUpdateFooterRows()}},{key:"_updateItem",value:function _updateItem(row,item){var _this6=this;row._item=item;Array.from(row.children).forEach(function(cell){if(cell._instance){cell._instance.setProperties({item:item,index:row.index})}});this._toggleRowSelected(row,this._isSelected(item));this._toggleRowDetailsOpened(row,this._rowDetailsTemplate&&this._isDetailsOpened(item));this._toggleRowExpanded(row,this._isExpanded(item));this._updateRowLevel(row,this._getIndexLevel(row.index));if(this._rowDetailsTemplate){this._toggleDetailsCell(row,item)}this._debouncerUpdateHeights=Polymer.Debouncer.debounce(this._debouncerUpdateHeights,Polymer.Async.timeOut.after(1),function(){_this6._updateMetrics();_this6._positionItems();_this6._updateScrollerSize()})}},{key:"_toggleRowDetailsOpened",value:function _toggleRowDetailsOpened(row,detailsOpened){Array.from(row.children).forEach(function(cell){if(cell._instance){cell._instance.__detailsOpened__=detailsOpened;cell._instance.detailsOpened=detailsOpened}});this._a11yUpdateRowDetailsOpened(row,detailsOpened)}},{key:"_toggleRowSelected",value:function _toggleRowSelected(row,selected){Array.from(row.children).forEach(function(cell){if(cell._instance){cell._instance.__selected__=selected;cell._instance.selected=selected}});this._toggleAttribute("selected",selected,row);this._a11yUpdateRowSelected(row,selected)}},{key:"_updateRowLevel",value:function _updateRowLevel(row,level){Array.from(row.children).forEach(function(cell){if(cell._instance){cell._instance.__level__=level;cell._instance.level=level}});this._a11yUpdateRowLevel(row,level)}},{key:"_toggleRowExpanded",value:function _toggleRowExpanded(row,expanded){Array.from(row.children).forEach(function(cell){if(cell._instance){cell._instance.__expanded__=expanded;cell._instance.expanded=expanded}});this._toggleAttribute("expanded",expanded,row)}},{key:"_resizeHandler",value:function _resizeHandler(){this._updateDetailsCellHeights();this._accessIronListAPI(babelHelpers.get(babelHelpers.getPrototypeOf(GridElement.prototype),"_resizeHandler",this),!0);this._updateHeaderFooterMetrics()}},{key:"_updateHeaderFooterMetrics",value:function _updateHeaderFooterMetrics(){var _this7=this,headerHeight=this.$.header.clientHeight+"px",footerHeight=this.$.footer.clientHeight+"px";[this.$.outersizer,this.$.fixedsizer,this.$.items].forEach(function(element){element.style.borderTopWidth=headerHeight;element.style.borderBottomWidth=footerHeight});Polymer.RenderStatus.afterNextRender(this.$.header,function(){if(_this7._pendingScrollToIndex){_this7._scrollToIndex(_this7._pendingScrollToIndex)}})}},{key:"_onAnimationEnd",value:function _onAnimationEnd(e){if("vaadin-grid-appear"===e.animationName){this._render();this._updateHeaderFooterMetrics();e.stopPropagation()}}},{key:"_toggleAttribute",value:function _toggleAttribute(name,bool,node){if(bool){node.setAttribute(name,"")}else{node.removeAttribute(name)}}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(GridElement.prototype),"ready",this).call(this);if(null===document.doctype){console.warn("<vaadin-grid> requires the \"standards mode\" declaration. Please add <!DOCTYPE html> to the HTML document.")}}}]);return GridElement}(Vaadin.ThemableMixin(Vaadin.Grid.DataProviderMixin(Vaadin.Grid.ScrollMixin(Vaadin.Grid.KeyboardNavigationMixin(Vaadin.Grid.CombinedMixin(Vaadin.Grid.ColumnReorderingMixin(Vaadin.Grid.ColumnResizingMixin(Vaadin.Grid.ScrollerElement))))))));customElements.define(GridElement.is,GridElement);window.Vaadin=window.Vaadin||{};Vaadin.GridElement=GridElement}</script>
</body></html>