<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
--><html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer/lib/utils/async.html">
<link rel="import" href="vaadin-grid-column.html">

</head><body><dom-module id="vaadin-grid-column-group">
  <script>{var GridColumnGroupElement=function(_Vaadin$Grid$ColumnBa){babelHelpers.inherits(GridColumnGroupElement,_Vaadin$Grid$ColumnBa);function GridColumnGroupElement(){babelHelpers.classCallCheck(this,GridColumnGroupElement);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GridColumnGroupElement).apply(this,arguments))}babelHelpers.createClass(GridColumnGroupElement,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(GridColumnGroupElement.prototype),"connectedCallback",this).call(this);this._addNodeObserver();this._updateFlexAndWidth()}},{key:"detached",value:function detached(){if(this._observer){Polymer.dom(this).unobserveNodes(this._observer)}}},{key:"_columnPropChanged",value:function _columnPropChanged(path,value){if("hidden"===path){this._preventHiddenCascade=!0;this._updateVisibleChildColumns(this._childColumns);this._preventHiddenCascade=!1}if(/flexGrow|width|hidden|_childColumns/.test(path)){this._updateFlexAndWidth()}if("frozen"===path){this.frozen=this.frozen||value}if("lastFrozen"===path){this._lastFrozen=this._lastFrozen||value}}},{key:"_groupOrderChanged",value:function _groupOrderChanged(order,rootColumns){var _Mathlog=Math.log;if(order&&rootColumns){var trailingZeros=/(0+)$/.exec(order).pop().length,childCountDigits=~~(_Mathlog(rootColumns.length)/_Mathlog(Math.LN10))+1,scope=Math.pow(10,trailingZeros-childCountDigits),_rootColumns=rootColumns.slice(0);if(_rootColumns[0]&&_rootColumns[0]._order){_rootColumns.sort(function(a,b){return a._order-b._order})}_rootColumns.forEach(function(column,index){return column._order=order+(index+1)*scope})}}},{key:"_groupReorderStatusChanged",value:function _groupReorderStatusChanged(reorderStatus,rootColumns){if(reorderStatus===void 0||rootColumns===void 0){return}rootColumns.forEach(function(column){return column._reorderStatus=reorderStatus})}},{key:"_groupResizableChanged",value:function _groupResizableChanged(resizable,rootColumns){if(rootColumns===void 0){return}rootColumns.forEach(function(column){return column.resizable=resizable})}},{key:"_updateVisibleChildColumns",value:function _updateVisibleChildColumns(childColumns){this._visibleChildColumns=Array.prototype.filter.call(childColumns,function(col){return!col.hidden})}},{key:"_childColumnsChanged",value:function _childColumnsChanged(childColumns){if(!this._autoHidden&&this.hidden){Array.prototype.forEach.call(childColumns,function(column){return column.hidden=!0});this._updateVisibleChildColumns(childColumns)}}},{key:"_updateFlexAndWidth",value:function _updateFlexAndWidth(){if(!this._visibleChildColumns){return}if(this._visibleChildColumns.length){this._setWidth("calc("+Array.prototype.reduce.call(this._visibleChildColumns,function(prev,curr){return prev+=" + "+(curr.width||"0px").replace("calc","")},"").substring(3)+")")}else{this._setWidth("0px")}this._setFlexGrow(Array.prototype.reduce.call(this._visibleChildColumns,function(prev,curr){return prev+curr.flexGrow},0))}},{key:"_groupFrozenChanged",value:function _groupFrozenChanged(frozen,rootColumns){if(rootColumns===void 0||frozen===void 0){return}if(!1!==frozen){Array.from(rootColumns).forEach(function(col){return col.frozen=frozen})}}},{key:"_groupHiddenChanged",value:function _groupHiddenChanged(hidden,rootColumns){if(rootColumns&&!this._preventHiddenCascade){this._ignoreVisibleChildColumns=!0;rootColumns.forEach(function(column){return column.hidden=hidden});this._ignoreVisibleChildColumns=!1}this._columnPropChanged("hidden")}},{key:"_visibleChildColumnsChanged",value:function _visibleChildColumnsChanged(visibleChildColumns){this._colSpan=visibleChildColumns.length;if(!this._ignoreVisibleChildColumns){if(0===visibleChildColumns.length){this._autoHidden=this.hidden=!0}else if(this.hidden&&this._autoHidden){this._autoHidden=this.hidden=!1}}}},{key:"_colSpanChanged",value:function _colSpanChanged(colSpan,headerCell,footerCell){if(headerCell){headerCell.setAttribute("colspan",colSpan);this._grid&&this._grid._a11yUpdateCellColspan(headerCell,colSpan)}if(footerCell){footerCell.setAttribute("colspan",colSpan);this._grid&&this._grid._a11yUpdateCellColspan(footerCell,colSpan)}}},{key:"_getChildColumns",value:function _getChildColumns(el){return Polymer.dom(el).queryDistributedElements("*").filter(this._isColumnElement)}},{key:"_addNodeObserver",value:function _addNodeObserver(){var _this=this;this._observer=Polymer.dom(this).observeNodes(function(info){if(0<info.addedNodes.filter(_this._isColumnElement).length||0<info.removedNodes.filter(_this._isColumnElement).length){_this._preventHiddenCascade=!0;_this._rootColumns=_this._getChildColumns(_this);_this._childColumns=_this._rootColumns;_this._preventHiddenCascade=!1;Polymer.Async.microTask.run(function(){_this._grid&&_this._grid._updateColumnTree&&_this._grid._updateColumnTree()})}});this._observer.flush()}},{key:"_isColumnElement",value:function _isColumnElement(node){return node.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(node.localName)}}],[{key:"is",get:function get(){return"vaadin-grid-column-group"}},{key:"properties",get:function get(){return{_childColumns:{value:function value(){return this._getChildColumns(this)}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,_colSpan:Number,_rootColumns:Array}}},{key:"observers",get:function get(){return["_updateVisibleChildColumns(_childColumns)","_childColumnsChanged(_childColumns)","_groupFrozenChanged(frozen, _rootColumns)","_groupHiddenChanged(hidden, _rootColumns)","_visibleChildColumnsChanged(_visibleChildColumns)","_colSpanChanged(_colSpan, _headerCell, _footerCell)","_groupOrderChanged(_order, _rootColumns)","_groupReorderStatusChanged(_reorderStatus, _rootColumns)","_groupResizableChanged(resizable, _rootColumns)"]}}]);return GridColumnGroupElement}(Vaadin.Grid.ColumnBaseMixin(Polymer.Element));customElements.define(GridColumnGroupElement.is,GridColumnGroupElement);window.Vaadin=window.Vaadin||{};Vaadin.GridColumnGroupElement=GridColumnGroupElement}</script>
</dom-module>
</body></html>