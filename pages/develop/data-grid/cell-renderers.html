<html><head><link defer="" rel="import" href="../../../bower_components/polymer/polymer.html">
  <link defer="" rel="import" href="../../../bower_components/px-demo/px-demo-footer.html">
  <link defer="" rel="import" href="../../../bower_components/px-demo/px-demo-footer.html">
  <link defer="" rel="import" href="../../../elements/px-catalog-page/px-catalog-page-behavior.html">
  <link defer="" rel="import" href="../../../elements/px-catalog-page/px-catalog-page-elements.html">
  <link defer="" rel="import" href="../../../elements/px-catalog-code-snippet/px-catalog-code-snippet.html">
  <link defer="" rel="import" href="../../../css/px-catalog-page-styles.html">
  <link defer="" rel="import" href="../../../css/px-catalog-theme-styles.html">
  

  </head><body><dom-module id="view-develop-data-grid-cell-renderers">
    <template>
      <style include="px-catalog-theme-styles px-catalog-page-styles px-catalog-code-styles"></style>
      

      <div class="page">
        
  <div class="page-anchors" id="toc">
    <ul class="toc">
      
  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#introduction', activeAnchor)]]" href="#" anchor="#introduction" on-tap="_handleAnchorTapped">Introduction</a>
    
  </li>

  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#use-built-in-renderers', activeAnchor)]]" href="#" anchor="#use-built-in-renderers" on-tap="_handleAnchorTapped">Use built-in renderers</a>
    <ul class="toc">
  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#string-renderer', activeAnchor)]]" href="#" anchor="#string-renderer" on-tap="_handleAnchorTapped">String renderer</a>
    
  </li>

  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#number-renderer', activeAnchor)]]" href="#" anchor="#number-renderer" on-tap="_handleAnchorTapped">Number renderer</a>
    
  </li>

  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#date-renderer', activeAnchor)]]" href="#" anchor="#date-renderer" on-tap="_handleAnchorTapped">Date renderer</a>
    
  </li>
</ul>
  </li>

  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#create-custom-renderers', activeAnchor)]]" href="#" anchor="#create-custom-renderers" on-tap="_handleAnchorTapped">Create custom renderers</a>
    <ul class="toc">
  <li class="toc__item">
    <a class$="toc__item__link [[_getTocLinkClassName('#tutorial-create-a-boolean-renderer', activeAnchor)]]" href="#" anchor="#tutorial-create-a-boolean-renderer" on-tap="_handleAnchorTapped">Tutorial: Create a boolean renderer</a>
    
  </li>
</ul>
  </li>

    </ul>
  </div>

        <div class="page-content">
          <h2 class="page-title">Data Grid: Cell Renderers</h2>
          
          
<p>The grid uses cell renderers to format and display data. Apps can choose from a set of built-in renderers or use custom renderers to create powerful new ways to display information.</p>
<h3 id="introduction">Introduction</h3>
<p>By default the grid treats all of its data as a string, printing out each cell’s value directly without any custom formatting. This makes sense for simple data like names, identifiers, or simple values. But complex data may call for custom styling or formatting to make it easier for the user to scan and digest information.</p>
<p>For example, cells containing time series data could use a spark line chart to visualize the values instead of printing them out as a list of numbers:</p>
<p><catalog-picture img-src="../../img/developer-guides/data-grid/cell-renderers-introduction" img-alt="Data grid cell showing a spark line chart using a custom renderer">
</catalog-picture></p>
<p>Custom renderers are tiny web components, just like px-data-grid and the rest of the Predix Design System components. They can display data in simple read-only formats or in complex interactive formats. Custom renderers can also be used to present new UIs for editing cell data when the grid enters editable mode.</p>
<h3 id="use-built-in-renderers">Use built-in renderers</h3>
<p>The data grid ships with three built-in renderers: a string renderer, number renderer, and date renderer. Use the grid <code class="code code--inline">columns</code> property to define the renderer for cells. Set the <code class="code code--inline">renderer</code> option for each column to the name of the renderer to use.</p>
<p>See the “Define columns” guide for more information on creating column definitions, and the px-data-grid API documentation for a complete list of available options.</p>
<p>The following <code class="code code--inline">columns</code> definition would use the string renderer for units, the number renderer for heat, and the date renderer for timestamp:</p>
<px-catalog-code-snippet language="javascript">
      <script type="text/code">
[
  {
    name: 'Unit',
    path: 'unit',
    renderer: 'px-data-grid-string-renderer'
  },
  {
    name: 'Heat',
    path: 'heat',
    renderer: 'px-data-grid-number-renderer'
  },
  {
    name: 'Recording Timestamp',
    path: 'timestamp',
    renderer: 'px-data-grid-date-renderer'
  }
];

      </script>
    </px-catalog-code-snippet><p>Renderers display data and allow users to edit data when the grid enters editable mode. Each built-in renderer behaves differently:</p>
<h4 id="string-renderer">String renderer</h4>
<p>The <strong>string renderer</strong> can be used by setting the column <code class="code code--inline">renderer</code> option to <code class="code code--inline">"px-data-grid-string-renderer"</code>. It displays data without any special formatting.</p>
<ul>
<li>If the data is already a string it’ll just be printed out (e.g. <code class="code code--inline">"foo"</code> would be displayed in a cell as foo)</li>
<li>If the data is a number or boolean, it will be casted to a string (e.g. <code class="code code--inline">0</code> is displayed as 0, <code class="code code--inline">1</code> becomes 1, and <code class="code code--inline">true</code> becomes true)</li>
<li>Arrays and objects will be casted using the <code class="code code--inline">toString()</code> method, which will return <code class="code code--inline">[object Object]</code> for most browsers.</li>
</ul>
<h4 id="number-renderer">Number renderer</h4>
<p>The <strong>number renderer</strong> can be used by setting the column <code class="code code--inline">renderer</code> option to <code class="code code--inline">"px-data-grid-number-renderer"</code>. It expects data that is already an integer that can be converted to an integer. It takes data and calls <code class="code code--inline">parseInt()</code> on it to convert it to an integer. The data must be parseable using <code class="code code--inline">parseInt()</code> or it will be displayed as <code class="code code--inline">NaN</code>, or not a number.</p>
<ul>
<li>If the data is already an integer it’ll just be printed (e.g. <code class="code code--inline">12</code> is displayed as 12)</li>
<li>If the data is a float, i’ll be parsed to an integer by all decimal place values (e.g. <code class="code code--inline">5.1</code> is displayed as 5, <code class="code code--inline">8.9</code> is displayed as 8). Note that floats will not be rounded, just parsed to an integer.</li>
<li>If the data is a string, it’ll be parsed to an integer if possible (e.g. <code class="code code--inline">”3"</code> is displayed as 3). If the data can’t be parsed to an integer, <code class="code code--inline">NaN</code> will be displayed</li>
<li>Arrays and objects will be displayed as <code class="code code--inline">NaN</code>, those data types can’t be converted to a number by <code class="code code--inline">parseInt</code></li>
</ul>
<h4 id="date-renderer">Date renderer</h4>
<p>The <strong>date renderer</strong> can be used by setting the column <code class="code code--inline">renderer</code> option to <code class="code code--inline">"px-data-grid-date-renderer"</code>. By default, it expects data formatted as an ISO string and displays data in the format <code class="code code--inline">YYYY-MM-DD HH:MM:ss</code>. Both of these formats can be changed by adding additional options to the column definition.</p>
<p>To change the format the grid expects when it parses the date/time data passed in from your app, set the <code class="code code--inline">renderConfig.dataFormat</code> option in your column definition to a valid <a href="https://momentjs.com/docs/#/parsing/string-format/">moment.js format string</a>.  Set the data format to <code class="code code--inline">"ISO"</code> to send in ISO strings. (That’s the default.) Set the data format to <code class="code code--inline">"X"</code> to send in unix timestamps.</p>
<p>To change the format the grid uses to display the date/time data to the user, set the <code class="code code--inline">renderConfig.displayFormat</code> option in your column definition to a valid <a href="https://momentjs.com/docs/#/parsing/string-format/">moment.js format string</a>.  The <code class="code code--inline">"ISO"</code> and <code class="code code--inline">"X"</code> data formats from above are also valid display formats.</p>
<h4>Example #1: Inspection Timestamps</h4>
<p>Inspection timestamps are stored in the database as unix timestamps (integers describing a point in time as the number of seconds elapsed since January 1, 1970). Timestamps look like this: <code class="code code--inline">1512063014</code>.</p>
<p>Timestamps are displayed in the data grid in the format <code class="code code--inline">MM-DD-YYYY HH:MM</code>.  The unix timestamp from above is displayed as: <code class="code code--inline">"11-30-2017 09:11"</code>.</p>
<p>The columns format and tableData format must match up to display the date/time correctly:</p>
<px-catalog-code-snippet language="html">
      <script type="text/code">
<px-data-grid></px-data-grid>
<script>
  const grid = document.querySelector('px-data-grid');
  grid.columns = [
    {
      name: 'Timestamp',
      path: 'timestamp',
      renderer: 'px-data-grid-date-renderer',
      rendererConfig: {
        dataFormat: 'X',
        displayFormat: 'MM-DD-YYYY HH:MM'
      }
    }
  ];
  grid.tableData = [
    { "timestamp": 1512063014 }
  ];
</script>

      
    </px-catalog-code-snippet><h3 id="create-custom-renderers">Create custom renderers</h3>
<p>Custom renderers allow applications to change the way data is displayed and edited in the grid. Custom renderers are tiny web components. When data needs to be displayed the grid creates a new instance of the custom renderer component, passes it data, and attaches it to the DOM.</p>
<p>Custom renderers should be written as [Polymer 2.x style components] (https://www.polymer-project.org/2.0/docs/devguide/registering-elements). The renderer component should extend the <code class="code code--inline">Predix.DataGridRendererMixin</code> base class, which is the same base class used to create the built-in renderers.</p>
<h4 id="tutorial-create-a-boolean-renderer">Tutorial: Create a boolean renderer</h4>
<p>This section covers the basic concepts for creating a renderer components by implementing a custom renderer that displays truthy boolean values as a green checkmark (✅) and falsey boolean values as a red (❌). We will use this custom boolean renderer to build an attendee registration status app for the “Centuries of Science” conference.</p>
<p><strong>Step 1: Setup project</strong></p>
<p>This example is more in-depth than other guides and requires a basic project with installed dependencies, HTML files, and a server to serve the files. This setup simulates the way you would build custom renderers in a real app. You can complete this tutorial using your browser with Glitch, or complete it on your computer using some simple command-line tools and a text editor.</p>
<p>To use Glitch:</p>
<ol>
<li>Open the <a href="https://glitch.com/">Glitch</a> website and login using your Github.com account</li>
<li>Open the <a href="https://glitch.com/edit/#!/tutorial-bool-custom-renderer">tutorial-bool-custom-renderer</a> Glitch</li>
<li>Click the name of the Glitch in the top left, and select “Remix This” from the menu</li>
<li>The page should reload and show you a new copy of the Glitch that you own</li>
<li>Click the “Show” button at the top to open your app in a new window</li>
</ol>
<p>Tip: Open the Glitch editor window and show windows side-by-side. The show window will refresh automatically as you make changes.</p>
<p>To develop locally:</p>
<p>Copy the files down from Glitch onto your computer. Open your shell of choice and <code class="code code--inline">cd</code> into that directory. Run a web server (like Python SimpleHTTPServer or the npm serve package) in the directory. Open the directory in a text editor and the served files in a browser.</p>
<p><strong>Step 2: File overview</strong></p>
<p>We will focus on the following files to make our custom renderer. If you just want to get started building, skip this section and go to Step 3.</p>
<ul>
<li><code class="code code--inline">public/src/my-app.html</code> - The entry point or root of our registration status app. This component loads Polymer, the px-data-grid component, and our custom renderer component. It also defines the data grid columns and data. This is a Polymer 2.x entry point, but you could use another framework like Vue, React, or Angular, or no framework at all to build it.</li>
<li><code class="code code--inline">public/src/bool-custom-renderer.html</code> - The file we use to define our custom renderer using a Polymer 2.x style component. The custom renderer must be a Polymer 2.x component and cannot be written using another framework.</li>
</ul>
<p>The other files in the project create a server Glitch uses to serve the files (<code class="code code--inline">server.js</code>), define the bower dependencies required to use px-data-grid (<code class="code code--inline">bower.json</code>), and load our app and other dependencies like polyfills and the default theme (<code class="code code--inline">public/index.html</code>).  You don’t need to touch these for the tutorial.</p>
<p><strong>Step 3: Use the boolean renderer</strong></p>
<p>By default, the grid renders all of its data as a string. The attendee registration status is a boolean, but it is just printed out as "true" or “false”:</p>
<p><catalog-picture img-src="../../img/developer-guides/data-grid/cell-renderers-tutorial-boolean-step3-strings" img-alt="Data grid cells showing attendee registration status printed out as true or false">
</catalog-picture></p>
<p>To change the way registration status is displayed, we need to change its column definition to use our custom renderer. Open <code class="code code--inline">my-app.html</code> and find the constructor method, where the grid columns are defined:</p>
<px-catalog-code-snippet language="javascript">
      <script type="text/code">
/* Define the grid columns */
this.columns = [
  {
    name: 'Registered',
    path: 'registered'
  },
  {
    name: 'Name',
    path: 'name'
  },
  {
    name: 'Email',
    path: 'email'
  }
];

      </script>
    </px-catalog-code-snippet><p>Change the renderer used for the registered column to use our new <code class="code code--inline">bool-custom-renderer</code>:</p>
<px-catalog-code-snippet language="javascript">
      <script type="text/code">
/* Define the grid columns */
this.columns = [
  {
    name: 'Registered',
    path: 'registered',
    // tells the grid to use the custom renderer
    renderer: 'bool-custom-renderer'
  },
  {
    name: 'Name',
    path: 'name'
  },
  {
    name: 'Email',
    path: 'email'
  }
];

      </script>
    </px-catalog-code-snippet><p>The name <code class="code code--inline">"bool-custom-renderer"</code> instructs the data grid to create a new custom element using that tag name to render the registration data. Open <code class="code code--inline">bool-custom-renderer.html</code> to see how that custom element is defined. The <code class="code code--inline">&lt;dom-module&gt;</code> tag ID and the <code class="code code--inline">static get is()</code> function both match this name.</p>
<p>The preview page should have automatically refreshed when you edited the columns (if not, hit refresh). The grid isn’t rendering anything in the registered column:</p>
<p><catalog-picture img-src="../../img/developer-guides/data-grid/cell-renderers-tutorial-boolean-step3-strings" img-alt="Data grid cells that are empty for the attendee registration column">
</catalog-picture></p>
<p>Nothing is showing up because our custom renderer template is empty, except for a  comment:</p>
<px-catalog-code-snippet language="html">
      <script type="text/code">
<template>
  <!-- Boolean renderer template-->
  <!-- @TODO: Show the data -->
</template>

      </script>
    </px-catalog-code-snippet><p>Add a bit of Hello World text to the template and hit refresh:</p>
<px-catalog-code-snippet language="html">
      <script type="text/code">
<template>
  <!-- Boolean renderer template-->
  Hello World
</template>

      </script>
    </px-catalog-code-snippet><p>You should see Hello World printed out for each cell in the registered column. You’ve implemented your first custom renderer. But it’s not a very smart one. It shows the same data for every cell, regardless of the value. In the next section we will use the cell data to decide what to render.</p>
<p><strong>Step 4: Use cell data in the custom renderer</strong></p>
<p>Our boolean custom renderer is built on top of the data grid renderer mixin:</p>
<px-catalog-code-snippet language="javascript">
      <script type="text/code">
class BoolCustomRenderer extends Predix.DataGridRendererMixin(Polymer.Element) {
  ...
}

      </script>
    </px-catalog-code-snippet><p>Using this mixin exposes the <code class="code code--inline">value</code> property, which can be used in the renderer’s template or accessed in its methods. The grid loops over each object in its table data and uses it to create a row. Each cell in the row is assigned its data through the <code class="code code--inline">value</code> property. The grid will pass <code class="code code--inline">true</code> or <code class="code code--inline">false</code> to each bool-custom-renderer instance’s <code class="code code--inline">value</code> property the row is created.</p>
<p>Replace the Hello World text in the bool-custom-renderer template with <code class="code code--inline">[[value]]</code>:</p>
<px-catalog-code-snippet language="html">
      <script type="text/code">
<template>
  <!-- Boolean renderer template-->
  [[value]]
</template>

      </script>
    </px-catalog-code-snippet><p>The grid should should render the strings “true” and “false” in the registered column. Now that we have access to the value, we can use it to get the right unicode symbol to show in the cell.</p>
<p>Create the method <code class="code code--inline">_getSymbol</code> on the BoolCustomRenderer class:</p>
<px-catalog-code-snippet language="javascript">
      <script type="text/code">
class BoolCustomRenderer extends Predix.DataGridRendererMixin(Polymer.Element) {
  static get is() { return 'bool-custom-renderer'; }

  static get properties() {
    return {};
  }

  /** Converts the cell value into a nice unicode symbol */
  _getSymbol(value) {
    if (value) {
      return '✅';
    }
    else {
      return '❌';
    }
  }
}

      </script>
    </px-catalog-code-snippet><p>Tip: Copy and paste the unicode symbols from the code block above. It isn’t easy to create them with your keyboard.</p>
<p>Now use the new method in the bool-custom-renderer template:</p>
<px-catalog-code-snippet language="html">
      <script type="text/code">
<template>
  <!-- Boolean renderer template-->
  [[_getSymbol(value)]]
</template>

      </script>
    </px-catalog-code-snippet><p>You should see the green checkmark (✅) and and red “X” (❌) symbols printed out for each cell in the registered column:</p>
<p><catalog-picture img-src="../../img/developer-guides/data-grid/cell-renderers-tutorial-boolean-step4-symbols" img-alt="Data grid cells showing symbols printed out in each cell">
</catalog-picture></p>
<p><strong>Step 5: Conclusion</strong></p>
<p>If you hit any snags or failed to implement the boolean renderer, <a href="https://glitch.com/edit/#!/completed-tutorial-bool-custom-renderer">open the completed Glitch</a> compare it with your code.</p>
<p>This tutorial covered the basics for creating a custom renderer. Custom renderers are web components that receive cell data and decide how to display it in the grid. Anything that can fit inside a web component template can be used in your renderer’s template. That means any Predix Design System component can technically be used if you import it and use it in your custom renderer template. Some components might not make sense in a data grid, like a time series chart. But try a few out and see what works.</p>
<p>New custom renderers should be placed directly in your application. Write as many as you’d like to solve your use cases. Or fall back on the default string, number, and data renderers if you don’t need anything special.</p>

        </div>
      </div>
      <px-demo-footer></px-demo-footer>
    </template>
    <script>Polymer({is:"view-develop-data-grid-cell-renderers",behaviors:[PxCatalogBehavior.Page],_dynamicTheme:!1,ready:function ready(){if(this._dynamicTheme){this.setAttribute("dynamic-theme","")}}});</script>
  </dom-module>
</body></html>